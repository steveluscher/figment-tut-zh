# ä»‹ç»

> åŸæ–‡ï¼š<https://github.com/figment-networks/learn-tutorials/blob/master/thegraph/matchstick.md>

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹çœ‹å¦‚ä½•è®¾ç½® matchstick å¹¶ä¸º MasterChefV2 å­å›¾ç¼–å†™å•å…ƒæµ‹è¯•ã€‚
æœ¬æ•™ç¨‹é€šå¸¸ä»¥ä»£ç æ¡†çš„å½¢å¼å±•ç¤ºè¡ŒåŠ¨å·å¬ã€‚
è¯·æ³¨æ„ï¼Œå¦‚æœæ‚¨éœ€è¦å¸®åŠ©æˆ–è€…æƒ³äº†è§£æœ¬æ•™ç¨‹ä¸­å¼•ç”¨çš„ä»»ä½•å‘½ä»¤çš„ç”¨æ³•ï¼Œè¯·åœ¨å‘½ä»¤åæ·»åŠ `--help`æ ‡å¿—ã€‚
å¦‚æœä½ åœ¨å­¦ä¹ æœ¬æ•™ç¨‹æ—¶æœ‰ä»»ä½•å›°éš¾ï¼Œä½ å¯ä»¥åŠ å…¥è™šæ„å­¦ä¹ [ä¸å’Œè°](https://discord.gg/fszyM7K)å¯»æ±‚å¸®åŠ©ï¼

# å…ˆå†³æ¡ä»¶

*   åŸºæœ¬ç†Ÿæ‚‰å‘½ä»¤è¡Œç•Œé¢ã€‚
*   åŸºæœ¬ç†Ÿæ‚‰ Git å’Œ GitHubã€‚
*   å¯¹å›¾è¡¨çš„å·¥ä½œåŸç†æœ‰åŸºæœ¬çš„äº†è§£ã€‚
*   åŸºæœ¬äº†è§£ä¸ºä»€ä¹ˆ [uni-t](https://en.wikipedia.org/wiki/Unit_testing) å¾ˆé‡è¦ã€‚

# è¦æ±‚

å¿…é¡»å®‰è£…ä»¥ä¸‹è½¯ä»¶:

*   [nodejs](https://nodejs.org/en/) v14+(å»ºè®®æœ€ä½ 14.17.6 LTS)
*   [å·æ›²](https://curl.se/)
*   [å»](https://git-scm.com/)
*   [çº±çº¿](https://yarnpkg.com/)
*   [å°èƒ¡å­](https://mustache.github.io/)

è·å– SushiSwap å­å›¾

```
git clone https://github.com/sushiswap/sushiswap-subgraph 
```

SushiSwap æœ‰å‡ ä¸ªä¸åŒçš„å­å›¾ã€‚å¯¹äºæœ¬æ•™ç¨‹ï¼Œæˆ‘ä»¬å°†æµè§ˆ MasterChefV2 å­å›¾ã€‚

```
cd sushiswap-subgraph/subgraphs/masterchefV2 
```

# å…¥é—¨æŒ‡å—

æˆ‘ä»¬å°†ä»å®‰è£…å’Œæ„å»º MasterChefV2 SushiSwap å­å›¾å¼€å§‹ã€‚ä»å…‹éš†çš„å­˜å‚¨åº“çš„æ ¹ç›®å½•ï¼Œè¿è¡Œ yarn æ¥å®‰è£…ä¾èµ–é¡¹:

```
yarn 
```

è¿™å°†è¾“å‡ºç±»ä¼¼çš„å†…å®¹:

```
yarn install v1.22.11
[1/4] Resolving packages...
[2/4] Fetching packages...
info fsevents@2.3.2: The platform "linux" is incompatible with this module.
info "fsevents@2.3.2" is an optional dependency and failed compatibility check. Excluding it from installation.
[3/4] Linking dependencies...
[4/4] Building fresh packages...
Done in 51.76s. 
```

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ¥è‡ª`package.json`çš„è„šæœ¬å°†é…ç½®åŠ è½½åˆ° subgraph.yaml ä¸­ã€‚

```
yarn prepare:mainnet 
```

æ‚¨çš„è¾“å‡ºåº”è¯¥æ˜¯:

```
yarn run v1.22.11
mustache config/mainnet.json template.yaml > subgraph.yaml
Done in 0.09s. 
```

ç„¶åï¼Œæˆ‘ä»¬å°†ç”Ÿæˆå­å›¾æ­£ç¡®å·¥ä½œæ‰€éœ€çš„ç±»ã€‚

```
yarn codegen 
```

æ‚¨çš„è¾“å‡ºåº”è¯¥ç±»ä¼¼äº:

```
âœ” Generate types for contract ABIs
  Generate types for data source template CloneRewarderTime
  Generate types for data source template StakingRewardsSushi
  Write types for templates to generated/templates.ts
âœ” Generate types for data source templates
  Load data source template ABI from packages/abis/CloneRewarderTime.json
  Load data source template ABI from packages/abis/StakingRewardsSushi.json
âœ” Load data source template ABIs
  Generate types for data source template ABI: CloneRewarderTime > CloneRewarderTime (packages/abis/CloneRewarderTime.json)
  Write types to generated/templates/CloneRewarderTime/CloneRewarderTime.ts
  Generate types for data source template ABI: StakingRewardsSushi > StakingRewardsSushi (packages/abis/StakingRewardsSushi.json)
  Write types to generated/templates/StakingRewardsSushi/StakingRewardsSushi.ts
âœ” Generate types for data source template ABIs
âœ” Load GraphQL schema from schema.graphql
  Write types to generated/schema.ts
âœ” Generate types for GraphQL schema

Types generated successfully

Done in 2.04s. 
```

**è¯¥æ–‡ä»¶ä¸­çš„å¤§å†™æœ‰é—®é¢˜:`sushiswap-subgraph/subgraphs/masterchefV2/src/entities/user.ts`**
æ‚¨éœ€è¦å°†è¯¥æ–‡ä»¶çš„ç¬¬ 4 è¡Œæ›´æ”¹ä¸ºä»¥ä¸‹å†…å®¹:

```
import { getMasterChef } from './masterchef'
```

æœ€åï¼Œæˆ‘ä»¬å°†æ„å»ºå­å›¾ã€‚

```
yarn build 
```

è¾“å‡ºçš„æœ€åä¸€è¡Œåº”è¯¥æ˜¯:

```
Build completed: /home/user/sushiswap-subgraph/subgraphs/masterchefV2/build/subgraph.yaml 
```

# å®‰è£…ç«æŸ´æ†æµ‹è¯•æ¡†æ¶

éµå¾ªç«æŸ´æ†çš„[å®‰è£…è¯´æ˜](https://github.com/LimeChain/matchstick)ã€‚
æˆ‘æ­£åœ¨ä½¿ç”¨ Ubuntu 20.04ï¼Œæ‰€ä»¥è¿™æ˜¯æˆ‘å°†ä½¿ç”¨çš„å‘½ä»¤ã€‚

```
curl -OL https://github.com/LimeChain/matchstick/releases/download/0.1.2/binary-linux-20 && mv binary-linux-20 matchstick && chmod a+x matchstick 
```

**å®‰è£… PostgreSQL**

å®‰è£… postgressqlï¼Œè¿™æ˜¯æˆ‘ä»¬çš„æµ‹è¯•æ¡†æ¶æ‰€éœ€è¦çš„ã€‚

```
sudo apt install postgresql 
```

**å®‰è£…ç«æŸ´æ£åŠ©æ‰‹**

ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…ç«æŸ´æ£åŠ©æ‰‹:

```
yarn add matchstick-as 
```

è¦æ£€æŸ¥ matchstick æ˜¯å¦æ­£å¸¸å·¥ä½œï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤:

```
./matchstick --help 
```

è¿™åº”è¯¥ä¼šè¾“å‡º:

```
Matchstick ğŸ”¥ 0.1.2
Limechain <https://limechain.tech>
Unit testing framework for Subgraph development on The Graph protocol.

USAGE:
    matchstick <DATASOURCE>

FLAGS:
    -h, --help       Prints help information
    -V, --version    Prints version information

ARGS:
    <DATASOURCE>    Sets the name of the datasource to use. 
```

# åˆ›å»ºæµ‹è¯•

åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º`tests`çš„æ–‡ä»¶å¤¹:

```
mkdir tests && cd tests && touch masterchefV2.test.ts 
```

> å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ Microsoft Windowsï¼Œåˆ™å¯ä»¥ä½¿ç”¨æ­¤å‘½ä»¤
> 
> ```
> mkdir tests && cd tests && type nul > masterchefV2.test.ts 
> ```

æ‚¨çš„æµ‹è¯•æ–‡ä»¶(`masterchefV2.test.ts`)åº”è¯¥ä¸æ˜ å°„æ–‡ä»¶åŒå:

```
dataSources:
  - kind: ethereum/contract
    name: MasterChefV2
    network: {{ network }}
    source:
      address: '{{ address }}'
      abi: MasterChefV2
      startBlock: {{ startBlock }}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      file: ./src/mappings/masterchefV2.ts # This line right here!
```

ç°åœ¨æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªç®€å•çš„æµ‹è¯•ç”¨ä¾‹æ¥çœ‹çœ‹ç©ºæµ‹è¯•æ˜¯å¦æœ‰æ•ˆã€‚åœ¨`masterchefV2.test.ts`ä¸­ç¼–å†™ä»¥ä¸‹ä»£ç :

```
import { clearStore, test, assert, newMockEvent } from "matchstick-as/assembly/index";
export function runTests(): void {
  test("EmptyTest", () => {
  }
}
```

å°†å¯¼å‡ºæ·»åŠ åˆ°æ–‡ä»¶`src/masterchefV2.ts`çš„æ–‡ä»¶æœ«å°¾:

```
export { runTests } from '../../tests/masterchefV2.test'
```

> **å·²çŸ¥é—®é¢˜**
> å½“ runTests()è¢«å¯¼å…¥æ˜ å°„æ–‡ä»¶æ—¶ï¼Œå¯¹æ‰˜ç®¡æœåŠ¡çš„éƒ¨ç½²å°†ä¸­æ–­ã€‚ç°åœ¨ï¼Œéœ€è¦ç§»é™¤/æ³¨é‡Šæ‰å¯¼å…¥ã€‚

ç°åœ¨æ˜¯è¿è¡Œå•å…ƒæµ‹è¯•æ¡†æ¶çš„æ—¶å€™äº†:

```
yarn build && ./matchstick MasterChefV2 
```

æ‚¨åº”è¯¥ä¼šçœ‹åˆ°ç±»ä¼¼çš„è¾“å‡º:

```
Build completed: /home/user/sushiswap-subgraph/subgraphs/masterchefV2/build/subgraph.yaml

Done in 4.16s.

___  ___      _       _         _   _      _
|  \/  |     | |     | |       | | (_)    | |
| .  . | __ _| |_ ___| |__  ___| |_ _  ___| | __
| |\/| |/ _` | __/ __| '_ \/ __| __| |/ __| |/ /
| |  | | (_| | || (__| | | \__ \ |_| | (__|   <
\_|  |_/\__,_|\__\___|_| |_|___/\__|_|\___|_|\_\

Igniting tests ğŸ”¥

âœ… EmptyTest

All tests passed! ğŸ˜
1 tests executed in 18.472016ms. 
```

# ç†è§£ SushiSwap å­å›¾

*   MasterChefV2 æ˜¯åœ¨`0xEF0881eC094552b2e128Cf945EF17a6752B4Ec5d`çš„åˆçº¦ã€‚
*   è¢«æŒ‚é’©çš„`eventHandlers`å‚è€ƒ template.yamlã€‚

```
eventHandlers:
    - event: Deposit(indexed address,indexed uint256,uint256,indexed address)
        handler: deposit
    - event: Withdraw(indexed address,indexed uint256,uint256,indexed address)
        handler: withdraw
    - event: EmergencyWithdraw(indexed address,indexed uint256,uint256,indexed address)
        handler: emergencyWithdraw
    - event: Harvest(indexed address,indexed uint256,uint256)
        handler: harvest
    - event: LogPoolAddition(indexed uint256,uint256,indexed address,indexed address)
        handler: logPoolAddition
    - event: LogSetPool(indexed uint256,uint256,indexed address,bool)
        handler: logSetPool
    - event: LogUpdatePool(indexed uint256,uint64,uint256,uint256)
        handler: logUpdatePool
```

è¿™æ˜¯åº”è¯¥æµ‹è¯•çš„åŠŸèƒ½åˆ—è¡¨ã€‚å¯¹äºæœ¬æ•™ç¨‹ï¼Œæˆ‘ä»¬å°†é€šè¿‡å­˜æ¬¾äº‹ä»¶å¤„ç†å‡½æ•°ã€‚

# æµ‹è¯•å­˜æ¬¾åŠŸèƒ½

**è‹çŠçš„å­˜æ¬¾ ABI**

ä» SushiSwap ä¸­çš„ handler å‡½æ•°ï¼Œæˆ‘ä»¬çŸ¥é“ handler å‡½æ•°çœ‹èµ·æ¥åƒè¿™æ ·:

```
export function deposit(event: Deposit): void { ... }
```

ä»£ç çš„`(event: Deposit)`éƒ¨åˆ†æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿè®©æˆ‘ä»¬ä»”ç»†çœ‹çœ‹:

ä» EventHandler ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“è¯¥å‡½æ•°çš„ç­¾åå¦‚ä¸‹æ‰€ç¤º:

```
eventHandlers:
- event: Deposit(indexed address,indexed uint256,uint256,indexed address)
    handler: deposit
```

ç„¶åï¼Œæˆ‘ä»¬æŸ¥çœ‹åŒ…ä¸­çš„ ABI(`build/MasterChefV2/packages/abis/MasterChefV2.json` )æ¥æ‰¾å‡ºå‡½æ•°ç­¾åã€‚

```
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "user",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "uint256",
        "name": "pid",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "to",
        "type": "address"
      }
    ],
    "name": "Deposit",
    "type": "event"
  }
```

ä»ä¸Šé¢ï¼Œæˆ‘ä»¬çŸ¥é“å­˜æ¬¾äº‹ä»¶çš„ç­¾åçœ‹èµ·æ¥åƒè¿™æ ·:

```
DepositEvent(userAddress:string, pid:BigInt, amount:BigInt, toAddress:string)
```

å› æ­¤ï¼Œè¦åˆ›å»ºå­˜æ¬¾äº‹ä»¶ï¼Œæˆ‘ä»¬éœ€è¦ 4 ä¸ªå‚æ•°:

```
function createDepositEvent(userAddress:string, pid:BigInt, amount:BigInt, toAddress:string): Deposit {
  // Create the Deposit Event -- Remember to Import
  let depositEvent = new Deposit();

  // Create the array of parameters...
  depositEvent.parameters = new Array();

  // Fill up the parameters in the correct order...
  let userAddressParam = new ethereum.EventParam();
  userAddressParam.value = ethereum.Value.fromAddress(Address.fromString(userAddress));
  let pidParam = new ethereum.EventParam();
  pidParam.value = ethereum.Value.fromUnsignedBigInt(pid);
  let amountParam = new ethereum.EventParam();
  amountParam.value = ethereum.Value.fromUnsignedBigInt(amount);
  let toAddressParam = new ethereum.EventParam();
  toAddressParam.value = ethereum.Value.fromAddress(Address.fromString(toAddress));

  // Add the parameters to the array
  depositEvent.parameters.push(userAddressParam);
  depositEvent.parameters.push(pidParam);
  depositEvent.parameters.push(amountParam);
  depositEvent.parameters.push(toAddressParam);
  return depositEvent;
}
```

ç„¶åï¼Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹:

```
test("Deposit Test", () => {
    // DepositEvent Signature
    // Deposit(indexed address,indexed uint256,uint256,indexed address)

    // Create a mockEvent
    let depositEvent = newMockEvent(createDepositEvent("0x89205A3A3b2A69De6Dbf7f01ED13B2108B2c43e7", BigInt.fromString("1000"), BigInt.fromString("2000"), "0x89205A3A3b2A69De6Dbf7f01ED13B2108B2c43e7")) as Deposit;

    // Let the Handler Run the Event
    deposit(depositEvent);

    // Check for Logic Correctness
    assert.fieldEquals("Pool", "1000", "id", "1000");
  });
```

æœ€åï¼Œæˆ‘ä»¬æ£€æŸ¥é€»è¾‘æ˜¯å¦æ­£å¸¸å·¥ä½œ:

```
export function deposit(event: Deposit): void {
  log.info('[MasterChefV2] Log Deposit {} {} {} {}', [
    event.params.user.toHex(),
    event.params.pid.toString(),
    event.params.amount.toString(),
    event.params.to.toHex()
  ])

  const masterChef = getMasterChef(event.block)
  const pool = getPool(event.params.pid, event.block) // getPool is called here!
  const user = getUser(event.params.to, event.params.pid, event.block)

  pool.slpBalance = pool.slpBalance.plus(event.params.amount)
  pool.save()

  user.amount = user.amount.plus(event.params.amount)
  user.rewardDebt = user.rewardDebt.plus(event.params.amount.times(pool.accSushiPerShare).div(ACC_SUSHI_PRECISION))
  user.save()
}
```

åœ¨å­˜æ¬¾å¤„ç†å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰å¯¹ getPool çš„è°ƒç”¨ã€‚åœ¨ getPool å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°åˆ›å»ºäº†ä¸€ä¸ªæ± å®ä½“:

```
export function getPool(pid: BigInt, block: ethereum.Block): Pool {
  const masterChef = getMasterChef(block)

  let pool = Pool.load(pid.toString()) // pid is saved here!

  if (pool === null) {
    pool = new Pool(pid.toString())
    pool.masterChef = masterChef.id
    pool.pair = ADDRESS_ZERO
    pool.allocPoint = BIG_INT_ZERO
    pool.lastRewardBlock = BIG_INT_ZERO
    pool.accSushiPerShare = BIG_INT_ZERO
    pool.slpBalance = BIG_INT_ZERO
    pool.userCount = BIG_INT_ZERO
  }

  pool.timestamp = block.timestamp
  pool.block = block.number
  pool.save()

  return pool as Pool
}
```

ç”±äº Pool å¯¹è±¡å°† pid çš„è¾“å…¥ä¿å­˜åˆ°å…¶ id ä¸­ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æ£€æŸ¥åœ¨å­˜æ¬¾åŠŸèƒ½æœŸé—´åˆ›å»ºçš„æ± çš„ id æ˜¯å¦ä¸ pid åŒ¹é…:

```
// This function takes in 4 variables: (GraphObjectName, GraphObjectID, GraphObjectParamName, GraphObjectParamValue)
assert.fieldEquals("Pool", "1000", "id", "1000");
```

å†æ¬¡è¿è¡Œæµ‹è¯•ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ–°åˆ›å»ºçš„æµ‹è¯•é€šè¿‡äº†ï¼

```
yarn build && ./matchstick MasterChefV2 
```

æ‚¨çš„è¾“å‡ºåº”è¯¥å¦‚ä¸‹æ‰€ç¤º:

```
Build completed: /home/user/sushiswap-subgraph/subgraphs/masterchefV2/build/subgraph.yaml

Done in 4.16s.

___  ___      _       _         _   _      _
|  \/  |     | |     | |       | | (_)    | |
| .  . | __ _| |_ ___| |__  ___| |_ _  ___| | __
| |\/| |/ _` | __/ __| '_ \/ __| __| |/ __| |/ /
| |  | | (_| | || (__| | | \__ \ |_| | (__|   <
\_|  |_/\__,_|\__\___|_| |_|___/\__|_|\___|_|\_\

Igniting tests ğŸ”¥

âœ… EmptyTest
âœ… Deposit Test
INFO [MasterChefV2] Log Deposit 0x89205a3a3b2a69de6dbf7f01ed13b2108b2c43e7 1000 2000 0x89205a3a3b2a69de6dbf7f01ed13b2108b2c43e7

All tests passed! ğŸ˜
2 tests executed in 21.93132ms. 
```

è¿™é‡Œæ˜¯æœ€ç»ˆç¡®å®šçš„`masterchefV2.test.ts`ï¼Œä»¥é˜²ä½ ä¸èƒ½è®©å®ƒå·¥ä½œ:

```
import { Address, ethereum, BigInt } from "@graphprotocol/graph-ts";
import { clearStore, test, assert, newMockEvent } from "matchstick-as/assembly/index";

import {
  Deposit,
} from '../generated/MasterChefV2/MasterChefV2'
import { deposit } from "../src/mappings/masterchefV2";

function createDepositEvent(userAddress:string, pid:BigInt, amount:BigInt, toAddress:string): Deposit {
  // Create the Deposit Event -- Remember to Import
  let depositEvent = new Deposit();

  // Create the array of parameters...
  depositEvent.parameters = new Array();

  // Fill up the parameters in the correct order...
  let userAddressParam = new ethereum.EventParam();
  userAddressParam.value = ethereum.Value.fromAddress(Address.fromString(userAddress));
  let pidParam = new ethereum.EventParam();
  pidParam.value = ethereum.Value.fromUnsignedBigInt(pid);
  let amountParam = new ethereum.EventParam();
  amountParam.value = ethereum.Value.fromUnsignedBigInt(amount);
  let toAddressParam = new ethereum.EventParam();
  toAddressParam.value = ethereum.Value.fromAddress(Address.fromString(toAddress));

  // Add the parameters to the array
  depositEvent.parameters.push(userAddressParam);
  depositEvent.parameters.push(pidParam);
  depositEvent.parameters.push(amountParam);
  depositEvent.parameters.push(toAddressParam);
  return depositEvent;
}

export function runTests(): void {
  test("EmptyTest", () => {
    });

  test("Deposit Test", () => {
    // DepositEvent Signature
    // Deposit(indexed address,indexed uint256,uint256,indexed address)

    // Create a mockEvent
    let depositEvent = newMockEvent(createDepositEvent("0x89205A3A3b2A69De6Dbf7f01ED13B2108B2c43e7", BigInt.fromString("1000"), BigInt.fromString("2000"), "0x89205A3A3b2A69De6Dbf7f01ED13B2108B2c43e7")) as Deposit;

    // Let the Handler Run the Event
    deposit(depositEvent);

    // Check for Logic Correctness
    assert.fieldEquals("Pool", "1000", "id", "1000");
  });
}
```

# ç»“è®º

1.  æˆ‘ä»¬è®²è¿°äº†å¦‚ä½•è®¾ç½®ã€å‡†å¤‡å’Œæ„å»º MasterChefV2 å­å›¾ã€‚
2.  æˆ‘ä»¬è®²è¿°äº†å¦‚ä½•ä¸ºå•å…ƒæµ‹è¯•å®‰è£… matchstickã€‚
3.  æˆ‘ä»¬è®¨è®ºäº†å¦‚ä½•è®¡ç®—ä»¥å¤ªåŠäº‹ä»¶çš„å‚æ•°ã€‚
4.  æˆ‘ä»¬è®¨è®ºäº†å¦‚ä½•ä¸ºå­˜æ¬¾å‡½æ•°ç¼–å†™ä¸€ä¸ªç®€å•çš„å•å…ƒæµ‹è¯•ã€‚

# åç»­æ­¥éª¤

1.  å°è¯•æ›´æ”¹`assert.fieldEquals("Pool", "1000", "id", "1000");`ä½¿æµ‹è¯•å¤±è´¥ï¼ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ
2.  ä½ è¿˜èƒ½æƒ³åˆ°ä»€ä¹ˆå…¶ä»–çš„æµ‹è¯•æ¡ˆä¾‹ï¼Ÿå°è¯•ç¼–å†™æ›´å¤šçš„å•å…ƒæµ‹è¯•ã€‚

# å…³äºä½œè€…

*   æœ¬æ•™ç¨‹ç”± Anton Yip åˆ›å»ºã€‚å¯ä»¥åœ¨ Github ä¸Šæ‰¾åˆ°ä»–ã€‚

# å‚è€ƒ

*   [https://github.com/sushiswap/sushiswap-subgraph](https://github.com/sushiswap/sushiswap-subgraph)
*   [https://github.com/LimeChain/matchstick](https://github.com/LimeChain/matchstick)