# ä»‹ç»

> åŸæ–‡ï¼š<https://github.com/figment-networks/learn-tutorials/blob/master/solana/solana-explorer-tutorial.md>

ç´¢æ‹‰çº³æ˜¯ä¸€ä¸ªå…¬å…±åŒºå—é“¾å¹³å°ã€‚å®ƒæ˜¯å¼€æºçš„å’Œå»ä¸­å¿ƒåŒ–çš„ï¼Œä½¿ç”¨åˆ©å®³å…³ç³»è¯æ˜å’Œå†å²è¯æ˜è¾¾æˆå…±è¯†ã€‚ä» Solana explorer å¼€å§‹å¯èƒ½ä¼šè®©äººä¸çŸ¥æ‰€æªã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å¼€æºçš„ dApp æ”¯æ¶æ¥æ„å»ºä¸€ä¸ª Solana Explorerã€‚

æˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªéå¸¸ç®€åŒ–çš„ Solana Explorer T1 çš„å…‹éš†ç‰ˆæœ¬ã€‚

![](img/ca47933ebf54fbd28e082183cf4f29ea.png)

# å…ˆå†³æ¡ä»¶

*   åŸºæœ¬ç†Ÿæ‚‰ javascript å’Œ reactjsã€‚
*   å®Œæˆ [Solana 101 é€”å¾„](https://learn.figment.io/protocols/solana)

# è¦æ±‚

*   [dApp è„šæ‰‹æ¶](https://github.com/solana-labs/dapp-scaffold)ã€‚
*   [GitHub è´¦æˆ·](https://github.com/)
*   å®‰è£…äº† Git

# å¼€å§‹

1.  é¦–å…ˆå…‹éš† dApp æ”¯æ¶ repo [dapp æ”¯æ¶](https://github.com/solana-labs/dapp-scaffold.git)ã€‚

```js
git clone https://github.com/solana-labs/dapp-scaffold.git 
```

```js
cd dapp-scaffold 
```

2.  è¦å®‰è£…ä¾èµ–é¡¹ï¼Œè¯·è¿è¡Œ`npm install`æˆ–`yarn`ã€‚

3.  `npm run start`æˆ–`yarn start`åœ¨æœ¬åœ°ä¸»æœºä¸Šè¿è¡Œ dappã€‚

![](img/261fe99ccb1e4cf5221451e00139fcb9.png)

æˆ‘ä»¬åº”è¯¥è®© dapp-scaffold åœ¨ localhost:3000 ä¸Šè¿è¡Œã€‚

![](img/9c50d12bba5971eb2a66a7fa77b8063c.png)

æˆ‘ä»¬å°†å»ºç«‹æˆ‘ä»¬å¯ä»¥åœ¨[ç´¢æ‹‰çº³æµè§ˆå™¨](https://explorer.solana.com/)ä¸­çœ‹åˆ°çš„åŸºæœ¬ç»Ÿè®¡æ•°æ®ï¼Œæˆ‘ä»¬å°†å®ƒåˆ†è§£æˆæ›´å¤šçš„åŸºæœ¬æ­¥éª¤ã€‚æˆ‘ä»¬å°†è·å–ä»·æ ¼ã€ç»Ÿè®¡æ•°æ®å¹¶æœç´¢åœ°å€ã€‚

# è·å–ç´¢æ‹‰çº³ä»·æ ¼

[https://youtu.be/0ly3cU5kPns](https://youtu.be/0ly3cU5kPns)

ä½œä¸ºç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬å°†ä» Coingecko è·å¾—ä»·æ ¼ã€‚åœ¨ components ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º PriceCard çš„æ–°æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨å…¶ä¸­åˆ›å»ºä¸€ä¸ªåä¸º`index.tsx`çš„æ–‡ä»¶ã€‚

å®Œæ•´è·¯å¾„:`src/components/PriceCard/index.tsx`ã€‚

å¤åˆ¶å¹¶ç²˜è´´ä»¥ä¸‹ä»£ç :

```js
import { useState } from "react";
import { abbreviatedNumber } from "../../utils/utils";
import React, { useEffect } from "react";
import { Typography, Tag, Card } from "antd";
const { Title, Text } = Typography;

// Create Interfaces for Coingecko API
export interface CoinInfo {
  price: number;
  volume_24: number;
  market_cap: number;
  price_change_percentage_24h: number;
  market_cap_rank: number;
  last_updated: Date;
}

export enum CoingeckoStatus {
  Success,
  FetchFailed,
  Loading,
}

export type CoinGeckoResult = {
  coinInfo?: CoinInfo;
  status: CoingeckoStatus;
};

export interface CoinInfoResult {
  market_data: {
    current_price: {
      usd: number;
    };
    total_volume: {
      usd: number;
    };
    market_cap: {
      usd: number;
    };
    price_change_percentage_24h: number;
    market_cap_rank: number;
  };
  last_updated: string;
}

export default function PriceCard() {
  const [coinInfo, setCoinInfo] = useState<CoinGeckoResult>();

  const coinId = "solana";
  useEffect(() => {
    getPrice();
  }, []);

  // Use Coingecko API
  function getPrice() {
    fetch(`https://api.coingecko.com/api/v3/coins/${coinId}`)
      .then((res) => res.json())
      .then((info: CoinInfoResult) => {
        setCoinInfo({
          coinInfo: {
            price: info.market_data.current_price.usd,
            volume_24: info.market_data.total_volume.usd,
            market_cap: info.market_data.market_cap.usd,
            market_cap_rank: info.market_data.market_cap_rank,
            price_change_percentage_24h:
              info.market_data.price_change_percentage_24h,
            last_updated: new Date(info.last_updated),
          },
          status: CoingeckoStatus.Success,
        });
      })
      .catch((error: any) => {
        setCoinInfo({
          status: CoingeckoStatus.FetchFailed,
        });
      });
  }

  // Display Solana price
  return (
    <Card
      hoverable
      style={{
        display: "inline-flex",
        justifyContent: "center",
        alignItems: "center",
      }}
    >
      {coinInfo?.coinInfo && (
        <>
          <Title level={3}>
            Price{" "}
            <Tag color="green">Rank #{coinInfo.coinInfo.market_cap_rank}</Tag>
          </Title>
          <Text>
            ${coinInfo.coinInfo.price.toFixed(2)}{" "}
            {coinInfo.coinInfo.price_change_percentage_24h > 0 && (
              <span color="green">
                &uarr;{" "}
                {coinInfo.coinInfo.price_change_percentage_24h.toFixed(2)}%
              </span>
            )}
            {coinInfo.coinInfo.price_change_percentage_24h < 0 && (
              <span color="red">
                &darr;{" "}
                {coinInfo.coinInfo.price_change_percentage_24h.toFixed(2)}%
              </span>
            )}
            {coinInfo.coinInfo.price_change_percentage_24h === 0 && (
              <span>0%</span>
            )}
          </Text>
          <Text>
            24h Vol: <em>${abbreviatedNumber(coinInfo.coinInfo.volume_24)}</em>
            MCap: <em>${abbreviatedNumber(coinInfo.coinInfo.market_cap)}</em>
          </Text>
        </>
      )}
    </Card>
  );
}
```

è¿™é‡Œï¼Œæˆ‘ä»¬åœ¨`getPrice()`å‡½æ•°ä¸­ä» Coingecko API è·å–äº†ä»·æ ¼ã€‚æˆ‘ä»¬è¿˜ä½¿ç”¨äº†`abbreviateNumber`æ¥æ˜¾ç¤ºæˆäº¤é‡å’Œå¸‚å€¼ã€‚æˆ‘ä»¬ç”¨`setCoinInfo`å°†è¿”å›å€¼ä¿å­˜åˆ°çŠ¶æ€ä¸­ã€‚å¦‚æœ`coinInfo`åŒ…å«æ•°æ®ï¼Œæˆ‘ä»¬åœ¨ç»„ä»¶ä¸­æ˜¾ç¤ºå®ƒã€‚

è½¬åˆ°`utils.ts`å’Œæœ€åçš„åŠŸèƒ½`abbreviateNumber`ã€‚æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªå‡½æ•°æ¥æ˜¾ç¤ºä¸€ä¸ªç”¨æˆ·å‹å¥½çš„æ•°å­—ã€‚

ç°åœ¨è½¬åˆ°`src/views/home/index.tsx`å¹¶å¯¼å…¥`PriceCard`

```js
import PriceCard from "../../components/PriceCard";
```

å¹¶åœ¨ return ä¸­æ·»åŠ `PriceCard`æ¥æ˜¾ç¤ºä»·æ ¼æˆåˆ†ã€‚

```js
return (
  <Row gutter={[16, 16]} align="middle" justify="center">
    {/* Add Solana price card to homepage */}
    <Col span={24}>
      <PriceCard />
    </Col>

    <Col span={12}>
      <WalletMultiButton type="ghost" />
    </Col>
    <Col span={12}>
      <Link to="/faucet">
        <Button>Faucet</Button>
      </Link>
    </Col>
    <Col span={24}>
      <div className="builton" />
    </Col>
  </Row>
);
```

ä¿å­˜æ‰€æœ‰æ–‡ä»¶ã€‚å…¨éƒ¨ä¿å­˜å¹¶é‡æ–°åŠ è½½ã€‚ç°åœ¨ä½ åº”è¯¥èƒ½çœ‹åˆ°ä»·æ ¼äº†ã€‚

![](img/eba68ed4dc1678f0b1185ca6dd307f82.png)

# è·å–ä¾›åº”ç»Ÿè®¡

[https://youtu.be/wNgtUQqIwEk](https://youtu.be/wNgtUQqIwEk)

è®©æˆ‘ä»¬ä¸€èµ·æ·±å…¥äº†è§£ Solana web3jsã€‚`Web3js`æä¾›ä¸€å¥—å®Œæ•´çš„è°ƒç”¨ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿè·å¾—é“¾ä¸Šæ•°æ®ã€‚ä½ å¯ä»¥æ›´æ·±å…¥åœ°é˜…è¯»[æ–‡æ¡£](https://solana-labs.github.io/solana-web3.js/)åˆ›å»ºä¸€ä¸ªåä¸º`SupplyCard`çš„æ–°æ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªç´¢å¼•æ–‡ä»¶:`src/components/SupplyCard.tsx/index.tsx`ã€‚

ç²˜è´´æ­¤ä»£ç :

```js
// Import Types and Connection from web3
import {
  Supply,
  Connection,
  clusterApiUrl,
  VoteAccountStatus,
} from "@solana/web3.js";
import { useEffect, useState } from "react";

// Import formatters for better visualization
import { abbreviatedNumber, lamportsToSol } from "../../utils/utils";
import React from "react";

import { Typography, Row, Card } from "antd";
const { Title, Paragraph } = Typography;

// Convert lamports ( A fractional native token ) in more human readable format
function displayLamports(value: number) {
  return abbreviatedNumber(lamportsToSol(value));
}

export default function SupplyCard() {
  const [supply, setSupply] = useState<Supply>();
  const [voteAccounts, setVoteAccounts] = useState<VoteAccountStatus>();
  useEffect(() => {
    getSupply();
  }, []);

  // Use connection to get the supply and the number of vote accounts
  async function getSupply() {
    const url = clusterApiUrl("devnet").replace("api", "explorer-api");
    const connection = new Connection(url, "finalized");
    const supply: Supply = (await connection.getSupply()).value;
    const voteAccounts = await connection.getVoteAccounts();
    setVoteAccounts(voteAccounts);
    setSupply(supply);
  }

  // Get delinquent or inactive validators
  const delinquentStake = React.useMemo(() => {
    if (voteAccounts) {
      return voteAccounts.delinquent.reduce(
        (prev, current) => prev + current.activatedStake,
        0
      );
    }
  }, [voteAccounts]);

  // Get active validators
  const activeStake = React.useMemo(() => {
    if (voteAccounts && delinquentStake) {
      return (
        voteAccounts.current.reduce(
          (prev, current) => prev + current.activatedStake,
          0
        ) + delinquentStake
      );
    }
  }, [voteAccounts, delinquentStake]);

  // Get theÂ percentage of stake that are in delinquent
  let delinquentStakePercentage;
  if (delinquentStake && activeStake) {
    delinquentStakePercentage = ((delinquentStake / activeStake) * 100).toFixed(
      1
    );
  }

  return (
    <Row gutter={[16, 16]} align="top" justify="center">
      {/* Show Active Stake */}
      <Card
        hoverable
        style={{
          display: "inline-flex",
          justifyContent: "center",
          alignItems: "center",
        }}
      >
        <Title level={3}>Active Stake</Title>
        {activeStake && supply && (
          <>
            <Paragraph>
              <em>{displayLamports(activeStake)}</em> /{" "}
              <small>{displayLamports(supply.total)}</small>
            </Paragraph>
            {delinquentStakePercentage && (
              <Paragraph>
                24h Vol: Delinquent stake: <em>{delinquentStakePercentage}%</em>
              </Paragraph>
            )}
          </>
        )}
      </Card>

      {/* Show Circulating Supply */}
      <Card
        hoverable
        style={{
          display: "inline-flex",
          justifyContent: "center",
          alignItems: "center",
        }}
      >
        <Title level={3}>Circulating Supply</Title>
        {activeStake && supply && (
          <>
            <Paragraph>
              <em>{displayLamports(supply.circulating)}</em> /{" "}
              <small>{displayLamports(supply.total)}</small>
            </Paragraph>
            <Paragraph>
              Non circulating <em>{displayLamports(supply.nonCirculating)}</em>
            </Paragraph>
          </>
        )}
      </Card>
    </Row>
  );
}
```

åœ¨`utils.ts`çš„æœ«å°¾åŠ ä¸Š:

```js
// utils.ts
import { LAMPORTS_PER_SOL } from "@solana/web3.js";

export function lamportsToSol(lamports: number): number {
  return Math.abs(lamports) / LAMPORTS_PER_SOL;
}
```

å°†`SupplyCard`å¯¼å…¥å¹¶æ·»åŠ åˆ°ä¸»å±å¹•`src/views/home/index.tsx`

```js
import SupplyCard from "../../components/SupplyCard";

//...

return (
  <Row gutter={[16, 16]} align="middle" justify="center">
    <Col span={24}>
      <PriceCard />
    </Col>

    {/* Add Supply data to homepage */}
    <Col span={24}>
      <SupplyCard />
    </Col>

    <Col span={12}>
      <WalletMultiButton type="ghost" />
    </Col>
    <Col span={12}>
      <Link to="/faucet">
        <Button>Faucet</Button>
      </Link>
    </Col>
    <Col span={24}>
      <div className="builton" />
    </Col>
  </Row>
);
```

è®©æˆ‘ä»¬å›åˆ°`SupplyCard.tsx`çœ‹çœ‹æˆ‘ä»¬åšäº†ä»€ä¹ˆã€‚ä»`web3.js`å¯¼å…¥`Supply`å’Œ`VoteAccountStatus`ç±»å‹ï¼Œå› ä¸ºæˆ‘ä»¬æ­£åœ¨ä½¿ç”¨ typescriptã€‚æˆ‘ä»¬å·²ç»ç”¨`clusterApiUrl`ä¸º Devnet åˆ›å»ºäº†ä¸€ä¸ª URLï¼Œæ›¾ç»åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„è¿æ¥ï¼Œæœ€åç”¨`getSupply()`ä½¿ç”¨è¯¥è¿æ¥è·å– supplyï¼Œç”¨`getVoteAccounts()`è·å– vote å¸æˆ·ã€‚ç„¶åå°†`voteAccounts`å’Œ`Supply`è®¾ç½®ä¸ºçŠ¶æ€ã€‚

å…¨éƒ¨ä¿å­˜ï¼Œè®©æˆ‘ä»¬æ¥ç ”ç©¶ä¸€ä¸‹ã€‚åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œä½ åº”è¯¥çœ‹åˆ°å‰ç«¯çš„æ´»è·ƒè‚¡ä»½å’Œå¾ªç¯ä¾›åº”ã€‚

![](img/3e51915798fdb132e50a5ebbf81892bf.png)

# è·å–é›†ç¾¤ç»Ÿè®¡ä¿¡æ¯

[https://youtu.be/LlXaPZTBHc4](https://youtu.be/LlXaPZTBHc4)

ä¸ºäº†æŒ‘æˆ˜ä½ è‡ªå·±ï¼Œçœ‹çœ‹ä½ æ˜¯å¦çŸ¥é“å¦‚ä½•ä» web3js è·å–æ•°æ®ï¼Œç°åœ¨æˆ‘ä»¬å°†åˆ›å»ºå¦ä¸€ä¸ªæ–‡ä»¶ï¼Œä½ å¿…é¡»ç”¨æ­£ç¡®çš„è°ƒç”¨æ›¿æ¢`undefined`æ¥è·å–æ•°æ®ã€‚åˆ›å»ºä¸€ä¸ªåŒ…å«ç´¢å¼•æ–‡ä»¶çš„æ–°æ–‡ä»¶å¤¹`StatsCard.tsx`ã€‚

```js
import { Connection, clusterApiUrl } from "@solana/web3.js";
import React, { useEffect, useState } from "react";
import { displayTimestampUtc } from "../../utils/utils";

import { Typography, Card } from "antd";
const { Title } = Typography;

export const SAMPLE_HISTORY_HOURS = 6;

// Create type for clusterStats state
export type ClusterStats = {
  absoluteSlot: number;
  blockHeight: number | undefined;
  blockTime: number;
  currentEpoch: string;
  epochProgress: string;
};

export default function StatsCard() {
  const [clusterStats, setClusterStats] = useState<ClusterStats>();
  useEffect(() => {
    getClusterStats();
  }, []);

  // Complete the code where is marked as TODO
  async function getClusterStats() {
    const url = undefined; // TODO 1: Retrieve the RPC API URL for the devnet
    const connection = new Connection(url);

    const epochInfo = await undefined; // TODO 2: get the epoch
    const blockTime = await connection.getBlockTime(epochInfo.absoluteSlot);
    const { blockHeight, absoluteSlot } = epochInfo;
    const currentEpoch = epochInfo.epoch.toString();
    const { slotIndex, slotsInEpoch } = epochInfo;
    const epochProgress = ((100 * slotIndex) / slotsInEpoch).toFixed(1) + "%";

    // Set the state with cluster stats
    if (blockTime !== null) {
      const clusterStatsData = {
        absoluteSlot,
        blockHeight,
        blockTime: blockTime * 1000,
        currentEpoch,
        epochProgress,
      };
      setClusterStats(clusterStatsData);
    }
  }

  // Show the card with cluster stats
  return (
    <Card
      hoverable
      style={{
        display: "inline-flex",
        justifyContent: "center",
        alignItems: "center",
      }}
    >
      <Title level={3}>Cluster Stats</Title>
      {clusterStats ? (
        <table>
          <tr>
            <td>Slot</td>
            <td>{clusterStats.absoluteSlot}</td>
          </tr>
          {clusterStats.blockHeight !== undefined && (
            <tr>
              <td>Block height</td>
              <td>{clusterStats.blockHeight}</td>
            </tr>
          )}
          {clusterStats.blockTime && (
            <tr>
              <td>Cluster time</td>
              <td> {displayTimestampUtc(clusterStats.blockTime)}</td>
            </tr>
          )}
          <tr>
            <th>Epoch</th>
            <th>{clusterStats.currentEpoch}</th>
          </tr>
          <tr>
            <th>Epoch progress</th>
            <th>{clusterStats.epochProgress}</th>
          </tr>
        </table>
      ) : (
        <p>No Data</p>
      )}
    </Card>
  );
}
```

åœ¨ utils æ–‡ä»¶ä¸­æ·»åŠ :

```js
// utils.ts
// Convert timestamp to human readable
export function displayTimestampUtc(
  unixTimestamp: number,
  shortTimeZoneName = false
): string {
  const expireDate = new Date(unixTimestamp);
  const dateString = new Intl.DateTimeFormat("en-US", {
    year: "numeric",
    month: "long",
    day: "numeric",
    timeZone: "UTC",
  }).format(expireDate);
  const timeString = new Intl.DateTimeFormat("en-US", {
    hour: "numeric",
    minute: "numeric",
    second: "numeric",
    timeZone: "UTC",
    timeZoneName: shortTimeZoneName ? "short" : "long",
  }).format(expireDate);
  return `${dateString} at ${timeString}`;
}
```

å¯¼å…¥åˆ°ä¸»é¡µã€‚

```js
import StatsCard from "../../components/StatsCard";

// ... add the stats card inside return
<Col span={24}>
  <StatsCard />
</Col>;
```

è¿™æ¬¡åœ¨`StatsCard`é‡Œé¢ï¼ŒURL å’Œ`epochInfo`è¢«**çœç•¥**è®©ä½ æ¥å®Œæˆå®ƒä»¬ã€‚åœ¨æœ¬æ•™ç¨‹çš„æœ€åï¼Œä½ ä¼šæ‰¾åˆ°æœ€ç»ˆçš„å›è´­ï¼Œä½ å¯ä»¥åœ¨é‚£é‡Œæ£€æŸ¥ç­”æ¡ˆï¼Œæˆ–è€…ä½ ä¹Ÿå¯ä»¥æŒ‰ç…§è§†é¢‘æ•™ç¨‹ã€‚å®Œæˆç¼ºå¤±ä¿¡æ¯åï¼Œæ‚¨å°†çœ‹åˆ°:

![](img/91053d90a0442bd584ccf9304a8bf7b1.png)

# æœç´¢å¸æˆ·å’Œäº¤æ˜“

[https://youtu.be/RYZRRcIBBJM](https://youtu.be/RYZRRcIBBJM)

ä½ åšå¾—å¾ˆå¥½ï¼Œç°åœ¨ä½ çŸ¥é“å¦‚ä½•ç”¨ Solana `web3js`è·å–æ•°æ®ã€‚æˆ‘ä»¬å°†ç»§ç»­å­¦ä¹ å¦‚ä½•æœç´¢å¸æˆ·å¹¶åˆ—å‡ºå†å²äº¤æ˜“ï¼Œæˆ‘ä»¬è¿˜å°†ä»äº¤æ˜“ä¸­è·å–è¯¦ç»†ä¿¡æ¯ã€‚ä¸ºäº†æ˜¾ç¤ºå®‰è£… react `moment`æ‰€éœ€çš„æ—¶é—´:

```js
npm i -D react-moment 
```

ç”¨ä¸€ä¸ª`index.tsx`æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶å¤¹`SearchCard`å¹¶ç²˜è´´:

```js
import "./style.css";
import bs58 from "bs58";
import React, { useState } from "react";

import AccountDetailsCard from "./AccountDetailsCard";
import TxDetailsCard from "./TxDetailsCard";

export type Query = { searchValue?: string; searchType?: string };

export default function SearchCard() {
  const [query, setQuery] = useState<Query>();

  // Set searched value to state
  function handleChange(event: any) {
    const { value } = event.target;
    console.log(value);
    setQuery({ searchValue: value });
  }

  // Set search type to address or signature
  function handleSubmit(event: any) {
    event.preventDefault();
    console.log(event.target);
    if (query?.searchValue !== undefined) {
      const decoded = bs58.decode(query?.searchValue);
      if (decoded.length === 32) {
        setQuery({ searchValue: query?.searchValue, searchType: "address" });
        console.log(decoded);
      } else if (decoded.length === 64) {
        setQuery({ searchValue: query?.searchValue, searchType: "signature" });
        console.log(decoded);
      } else {
        console.log("Input not correct");
      }
      event.preventDefault();
    }
  }

  // Show search input and the result
  return (
    <>
      <form onSubmit={handleSubmit}>
        <label>
          <input
            className="input"
            type="text"
            value={query?.searchValue}
            onChange={handleChange}
          />
        </label>
        <input className="submit" type="submit" value="Submit" />
      </form>

      {query?.searchType === "signature" && <TxDetailsCard query={query} />}

      {query?.searchType === "address" && <AccountDetailsCard query={query} />}
    </>
  );
}
```

åœ¨åŒä¸€æ–‡ä»¶å¤¹ä¸­åˆ›å»º`style.css`,å¹¶æ·»åŠ :

```js
.submit {
  background-color: #08d;
  border-radius: 2px;
  border: 0;
  box-sizing: border-box;
  color: #eee;
  cursor: pointer;
  font-size: 18px;
  height: 50px;
  outline: 0;
  text-align: center;
}

.submit:active {
  background-color: #06b;
}

.input {
  background-color: #303245;
  border-radius: 2px;
  border: 0;
  box-sizing: border-box;
  color: #eee;
  font-size: 18px;
  height: 50px;
  outline: 0;
  padding: 4px 20px 0;
}
```

åœ¨ç´¢å¼•æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å°†è¾“å…¥è§£ç ä¸º base 58 ç¼–ç ã€‚æ£€æŸ¥é•¿åº¦ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½çŸ¥é“æ˜¯åœ°å€è¿˜æ˜¯äº¤æ˜“ã€‚åœ°å€åœ¨`decoded.length === 32`ç­¾ååœ¨`decoded.length === 64`å¯ä»¥çœ‹åˆ°ã€‚åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œ`SearchCard`ï¼Œæˆ‘ä»¬æ·»åŠ ä»¥ä¸‹æ–‡ä»¶:`AccountDetailsCard.tsx`

```js
import { PublicKey } from "@solana/web3.js";
import { Connection, clusterApiUrl } from "@solana/web3.js";
import React, { useEffect, useState } from "react";

import HistoryCard from "./HistoryCard";

import { Typography, Card } from "antd";
const { Title } = Typography;

export type Query = { searchValue?: string; searchType?: string };

// Type for account details data
export type DataDetails = {
  program: string;
  parsed: {
    info: {
      decimals?: number;
      freezeAuthority?: string;
      isInitialized?: boolean;
      mintAuthority?: string;
      supply?: string;
      isNative?: false;
      mint?: string;
      owner?: string;
      state?: string;
      tokenAmount?: {
        amount: string;
        decimals: number;
        uiAmount: number;
        uiAmountString: string;
      };
    };
    type: string;
  };
};

export type Data = {
  pubkey: PublicKey;
  lamports: number;
  details?: {
    space: number;
    executable: boolean;
    owner: PublicKey;
    data?: DataDetails;
  };
};

export function AccountHeader({ data }: { data?: Data }) {
  const [detailsData, setDetailsData] = useState<DataDetails>();

  useEffect(() => {
    setDetailsData(data?.details?.data);
    console.log("detatailsData", detailsData);
  }, [data]);

  // Check if is token account
  const isToken =
    detailsData?.program === "spl-token" && detailsData?.parsed.type === "mint";

  // Show Token Account
  if (isToken) {
    return (
      <Card
        hoverable
        style={{
          display: "inline-flex",
          justifyContent: "center",
          alignItems: "center",
        }}
      >
        <Title level={3}>Token Account</Title>
        <table>
          <tr>
            <td>Address</td>
            <td>{data?.pubkey.toBase58()}</td>
          </tr>
          <tr>
            <th>Current Supply</th>
            <th>{detailsData?.parsed.info.supply}</th>
          </tr>
          <tr>
            <th>Mint Authority</th>
            <th>{detailsData?.parsed.info.mintAuthority}</th>
          </tr>
          <tr>
            <th>Decimals</th>
            <th>{detailsData?.parsed.info.decimals}</th>
          </tr>
        </table>
      </Card>
    );
  }

  // Show account
  return (
    <Card
      hoverable
      style={{
        display: "inline-flex",
        justifyContent: "center",
        alignItems: "center",
      }}
    >
      <Title level={3}>Account</Title>
      <table>
        <tr>
          <td>Address</td>
          <td>{data?.pubkey.toBase58()}</td>
        </tr>
        <tr>
          <th>Mint</th>
          <th>{detailsData?.parsed.info.mint}</th>
        </tr>
        <tr>
          <th>Owner</th>
          <th>{detailsData?.parsed.info.owner}</th>
        </tr>
        <tr>
          <th>State</th>
          <th>{detailsData?.parsed.info.state}</th>
        </tr>
      </table>
    </Card>
  );
}

export default function AccountDetailsCard({ query }: { query: Query }) {
  const [data, setData] = useState<Data>();
  let pubkey: PublicKey | undefined;

  useEffect(() => {
    getData();
  }, [query.searchValue]);

  async function getData() {
    // Get explorer url and connect
    const url = clusterApiUrl("devnet").replace("api", "explorer-api");
    const connection = new Connection(url, "finalized");

    try {
      if (query.searchValue !== undefined) {
        // Create public key from search string
        pubkey = new PublicKey(query.searchValue);
        // Get account data
        const result = (await undefined).value; // TODO: Get the account info

        let lamports, details;
        if (result === null) {
          lamports = 0;
        } else {
          // Get account lamports
          lamports = result.lamports;

          // Space used by account data
          let space: number;
          if (!("parsed" in result.data)) {
            space = result.data.length;
          } else {
            space = result.data.space;
          }

          // Set result data to the variable details
          let data: DataDetails | undefined;
          if ("parsed" in result.data) {
            data = {
              program: result.data.program,
              parsed: result.data.parsed,
            };
            details = {
              space,
              executable: result.executable,
              owner: result.owner,
              data,
            };
          } else {
            details = {
              space,
              executable: result.executable,
              owner: result.owner,
            };
          }
        }

        // Set all the data to the state
        setData({ pubkey, lamports, details });
        console.log("address", query.searchValue);
      }
    } catch (err) {}
  }

  // Return the account header and the component that shows the history.
  return (
    <>
      {!data?.pubkey ? (
        <p>Not valid pubkey</p>
      ) : (
        <>
          <AccountHeader data={data} />
          <HistoryCard pubkey={data.pubkey} />
        </>
      )}
    </>
  );
}
```

æˆ‘ä»¬ä½¿ç”¨`clusterApiUrl`æ¥è·å– URL å’Œè¿æ¥ï¼Œé€šè¿‡ Pubkey æ¥è·å–æ•°æ®ï¼Œä»è€Œè·å¾—å¸æˆ·çš„è¯¦ç»†ä¿¡æ¯ã€‚åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œæ‰¾å‡ºæˆ‘ä»¬è°ƒç”¨äº†å“ªä¸ªå‡½æ•°æ¥è·å–å¸æˆ·ä¿¡æ¯ã€‚ç”¨ä»¥ä¸‹ä»£ç åˆ›å»º`HistoryCard.tsx`:

```js
import {
  Connection,
  clusterApiUrl,
  PublicKey,
  ConfirmedSignatureInfo,
} from "@solana/web3.js";
import React, { useEffect, useState } from "react";
import Moment from "react-moment";

import { Typography, Card } from "antd";
const { Title } = Typography;

export type History = {
  fetched: ConfirmedSignatureInfo[];
};

export default function HistoryCard({ pubkey }: { pubkey: PublicKey }) {
  const [history, setHistory] = useState<History>();
  useEffect(() => {
    getHistory();
  }, [pubkey]);

  async function getHistory() {
    // Get API URL and create the connection
    const url = clusterApiUrl("devnet").replace("api", "explorer-api");
    const connection = new Connection(url);

    // Limit the maximum amounts of returned signatures
    const options = {
      limit: 25,
    };
    const fetched = undefined; //TODO: Get confirmed signatures for provided address

    setHistory({ fetched });
    console.log(fetched);
  }

  // Show the history
  return (
    <Card
      hoverable
      style={{
        display: "inline-flex",
        justifyContent: "center",
        alignItems: "center",
      }}
    >
      <Title level={3}>History</Title>
      {history?.fetched ? (
        <>
          <table>
            {history.fetched.map((item, i) => (
              <tr key={i}>
                <td>{item.signature.substr(0, 20)}...</td>
                <td>{item.slot}</td>

                <td>
                  {item?.blockTime ? (
                    <Moment date={item.blockTime * 1000} fromNow />
                  ) : (
                    ""
                  )}
                </td>
                <td>{item?.err ? "Failed" : "Success"}</td>
                <td>{item?.memo ? item.memo : ""}</td>
              </tr>
            ))}
          </table>
        </>
      ) : (
        <p> No History </p>
      )}
    </Card>
  );
}
```

è¿™é‡Œæˆ‘ä»¬éœ€è¦è·å–æ‰€æä¾›åœ°å€çš„ç­¾åã€‚æˆ‘ä»¬ç”¨ç¬é—´æ¥è¡¨ç¤ºä»ç°åœ¨å¼€å§‹çš„æ—¶é—´ã€‚å’Œäº¤æ˜“ä¿¡æ¯çš„æ–‡ä»¶ã€‚`TxDetailsCard.tsx`

```js
import { Connection, clusterApiUrl } from "@solana/web3.js";
import React, { useEffect, useState } from "react";

import { Typography, Card } from "antd";
const { Title } = Typography;

// Create types for the transaction details
export type Query = { searchValue?: string; searchType?: string };

export type Confirmations = number | "max";
export type Timestamp = number | "unavailable";

export type Data = {
  signature: string;
  info: {
    slot: number;
    timestamp: Timestamp;
    confirmations: Confirmations;
    confirmationStatus: "processed" | "confirmed" | "finalized" | undefined;
    result: {
      err: string | {} | null;
    };
  } | null;
};

export default function TxDetailsCard({ query }: { query: Query }) {
  const [txData, setTxData] = useState<Data>();

  useEffect(() => {
    getData();
  }, []);

  async function getData() {
    // Get API URL and create the connection
    const url = clusterApiUrl("devnet").replace("api", "explorer-api");
    const connection = new Connection(url, "finalized");

    let data;
    try {
      // Get the signature status
      if (query.searchValue !== undefined) {
        const { value } = await connection.getSignatureStatus(
          query.searchValue,
          {
            searchTransactionHistory: true,
          }
        );

        // If status is not null. Get transaction details
        let info = null;
        if (value !== null) {
          let confirmations: Confirmations;
          if (typeof value.confirmations === "number") {
            confirmations = value.confirmations;
          } else {
            confirmations = "max";
          }

          let blockTime = null;
          try {
            blockTime = await connection.getBlockTime(value.slot);
          } catch (error) {
            console.log(error);
          }
          let timestamp: Timestamp =
            blockTime !== null ? blockTime : "unavailable";

          info = {
            slot: value.slot,
            timestamp,
            confirmations,
            confirmationStatus: value.confirmationStatus,
            result: { err: value.err },
          };
        }
        console.log("info", info);
        data = { signature: query.searchValue, info };
        setTxData(data);
      }
    } catch (error) {
      console.log(error);
    }
  }

  // Show transaction details
  return (
    <Card
      hoverable
      style={{
        display: "inline-flex",
        justifyContent: "center",
        alignItems: "center",
      }}
    >
      <Title level={3}>Transaction</Title>
      <table>
        <tr>
          <td>Signature</td>
          <td>{query.searchValue?.substr(0, 20)}...</td>
        </tr>
        <tr>
          <td>Result</td>
          <td>{txData?.info?.result.err ? "Failed" : "Success"}</td>
        </tr>
        <tr>
          <td>Timestamp</td>
          <td>
            {txData?.info?.timestamp !== "unavailable" ? (
              <p>{txData?.info?.timestamp}</p>
            ) : (
              <p>Unavailable</p>
            )}
          </td>
        </tr>
        <tr>
          <td>Confirmation Status</td>
          <td>{txData?.info?.confirmationStatus || "Unknown"}</td>
        </tr>
        <tr>
          <td>Confirmations</td>
          <td>{txData?.info?.confirmations}</td>
        </tr>
        <tr>
          <td>Block</td>
          <td>{txData?.info?.slot}</td>
        </tr>
      </table>
    </Card>
  );
}
```

æˆ‘ä»¬é¦–å…ˆä½¿ç”¨è¿æ¥æ¥æ£€æŸ¥ç­¾åçŠ¶æ€ã€‚å¦‚æœå®ƒä¸ä¸ºç©ºï¼Œæˆ‘ä»¬è·å–é˜»å¡æ—¶é—´å¹¶å°†å…¶å…¨éƒ¨ä¼ é€’ç»™`txData`ã€‚åœ¨ä¸»é¡µä¸Šå¯¼å…¥ç»„ä»¶ã€‚

```js
import SearchCard from "../../components/SearchCard";
// ...
// Add search card
<Col span={24}>
  <SearchCard />
</Col>;
```

å°è¯•æœç´¢ä¸€ä¸ªåœ°å€ï¼Œæ‚¨åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„å†…å®¹:

![](img/97b7664a4402cf289e23ad2103cc14d0.png)

æ­å–œä½ ï¼æˆ‘ä»¬æˆåŠŸäº†ã€‚<g-emoji class="g-emoji" alias="+1" fallback-src="https://github.githubassets.cimg/icons/emoji/unicode/1f44d.png">ğŸ‘</g-emoji>

# ç»“è®º

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ Solana dapp-scaffold å’Œ Solana explorer çš„ä¸»è¦ç‰¹æ€§æ„å»ºäº†ä¸€ä¸ªç®€å•çš„åŒºå—é“¾æµè§ˆå™¨ã€‚æˆ‘ä»¬å·²ç»å­¦ä¼šäº†å¦‚ä½•ä» Coingecko è·å–ä»·æ ¼æ•°æ®ï¼Œä½¿ç”¨@solana/web3.js è·å–ä¸€èˆ¬ç»Ÿè®¡æ•°æ®ï¼Œä»ä¸€ä¸ªå¸æˆ·ä¸­æœç´¢å†å²äº¤æ˜“å¹¶è·å–äº¤æ˜“çš„è¯¦ç»†ä¿¡æ¯ã€‚

å¦‚æœæ‚¨åœ¨é˜…è¯»æœ¬æ•™ç¨‹æ—¶æœ‰ä»»ä½•å›°éš¾ï¼Œæˆ–è€…åªæ˜¯æƒ³ä¸æˆ‘ä»¬è®¨è®ºç´¢æ‹‰çº³æŠ€æœ¯ï¼Œæ‚¨å¯ä»¥ä»Šå¤©å°±[åŠ å…¥æˆ‘ä»¬çš„ç¤¾åŒº](https://figment.io/devchat)ï¼

# åç»­æ­¥éª¤

Dapp-scaffold å…è®¸æ‚¨è¿æ¥åˆ°æ‚¨çš„é’±åŒ…ï¼Œæ‚¨å¯ä»¥é€šè¿‡ä»è¿æ¥çš„å¸æˆ·è·å–æ‰€æœ‰æ•°æ®æ¥åˆ›å»ºä¸ªäººä»ªè¡¨æ¿ã€‚

# å…³äºä½œè€…

æœ¬æ•™ç¨‹ç”± Giovanni Fu åˆ›ä½œã€‚å¯ä»¥åœ¨ Github ä¸Šæ‰¾åˆ°ä»–ã€‚

# å‚è€ƒ

*   [Dapp è„šæ‰‹æ¶](https://github.com/solana-labs/dapp-scaffold)
*   [ç´¢æ‹‰çº³æ¢é™©å®¶](https://github.com/solana-labs/explorer)
*   [ç´¢æ‹‰çº³ web3](https://github.com/solana-labs/solana-web3.js)
*   [èš‚èšè®¾è®¡](https://ant.design/)

å·²å®Œæˆçš„é¡¹ç›®æº

*   [ç»“æŸé¡¹ç›®](https://github.com/aeither/dapp-scaffold-explorer-tutorial)