# mirror/07-transfer-nft

> åŸæ–‡ï¼š<https://github.com/figment-networks/learn-tutorials/blob/master/mirror/07-transfer-nft.md>

Web 3 çš„å…³é”®åŸåˆ™ä¹‹ä¸€æ˜¯å¯ç»„åˆæ€§ï¼Œå› æ­¤æ‚¨å¯ä»¥å°†è¿™ä¸€æ­¥è§†ä¸ºæ›´é«˜çº§çš„åšå®¢å…¥å£å¸‚åœºçš„å…ˆé©±ã€‚ä¹Ÿè®¸ä½ æˆ–å…¶ä»–äººæƒ³è¦å»ºç«‹ä¸€ä¸ª dAppï¼Œå…è®¸äººä»¬ä¹°å–åšå®¢æ¡ç›®æ‰€æœ‰æƒã€‚

å› ä¸º Web 3 å †æ ˆæ˜¯å»ä¸­å¿ƒåŒ–çš„ï¼Œè¿™æ„å‘³ç€æ•°æ®ä¸å†ç”Ÿæ´»åœ¨ä¸€ä¸ªæœ‰å›´å¢™çš„èŠ±å›­é‡Œï¼Œåœ¨é‚£é‡Œåº”ç”¨ç¨‹åºæ‰€æœ‰è€…æ§åˆ¶è®¿é—®å¹¶æ‹¥æœ‰æ•°æ®ã€‚åœ¨ Web 3 ä¸­ï¼Œç”¨æˆ·ä¸ä»…ä¿ç•™äº†å¯¹æ•°æ®çš„æ‰€æœ‰æƒï¼Œè¿˜ä¿ç•™äº†å°†æ•°æ®ç§»æ¤åˆ°å…¶ä»– ui çš„èƒ½åŠ›ï¼Œè¿™äº› ui å¯ä»¥ç›´æ¥ä»åŒºå—é“¾è®¿é—®æ•°æ®ã€‚

[![Hooray! No more walled gardens for data](img/4b6bfd55c949596c8f00d8e66ddb7f3e.png)](https://raw.githubusercontent.com/figment-networks/learn-tutorials/master/mirror/assets/free.jpeg)

{% label %}ä¸‡å²ï¼ä¸å†æœ‰å›´å¢™èŠ±å›­å­˜æ”¾æ•°æ®

ä¸ºäº†ä½¿æ¯ä¸ªæ¡ç›®çš„ NFT å¯ä»¥è½¬ç§»ï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥æ¿€æ´»æ¯ä¸ªæ¡ç›®é¡µé¢ä¸Šæ˜¾ç¤ºçš„è“è‰²**è½¬ç§» NFT** æŒ‰é’®ã€‚å¦‚æœæˆ‘ä»¬è½¬åˆ°`TransferNFTForm.tsx`ç»„ä»¶ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ä¸€ä¸ª`handleSubmit`æŒ‰é’®ï¼Œä¸Šé¢æœ‰ä¸€äº›ç®€å•çš„æŒ‡ä»¤ï¼Œå°†æ™ºèƒ½åˆåŒè¿æ¥åˆ°ä¸€ä¸ªç­¾åè€…ï¼Œå¹¶åœ¨æ™ºèƒ½åˆåŒä¸Šè°ƒç”¨`transferFrom`ã€‚

å›æƒ³ä¸€ä¸‹ç¬¬ 6 æ­¥ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨`provider`ä¸Šè°ƒç”¨`getSigner`æ¥å®ä¾‹åŒ–ä¸€ä¸ªç­¾åè€…ã€‚è¿˜è®°å¾—æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†`signer`è¿æ¥åˆ°`contract`ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™é‡Œçš„ä»£ç æ¥è¿æ¥æ™ºèƒ½å¥‘çº¦å’Œä½äº`handleSubmit`é¡¶éƒ¨çš„ç­¾åè€…:

```js
const signer = provider.getSigner();
const contractWithSigner = contract.connect(signer);
```

# ä¼ è¾“éåŠŸèƒ½æ€§æµ‹è¯• <g-emoji class="g-emoji" alias="recycle" fallback-src="https://github.githubassets.cimg/icons/emoji/unicode/267b.png">â™»ï¸</g-emoji>

ç°åœ¨å‰©ä¸‹çš„å°±æ˜¯è°ƒç”¨å¥‘çº¦ä¸­çš„`transferFrom`å‡½æ•°ã€‚æ‚¨å¯èƒ½æƒ³çŸ¥é“è¿™ä¸ªå‡½æ•°åœ¨å“ªé‡Œï¼Œå› ä¸ºå½“æˆ‘ä»¬å®Œæˆ`MirrorClone.sol`å¥‘çº¦æ—¶ï¼Œæˆ‘ä»¬æ²¡æœ‰åœ¨æ­¥éª¤ 6 ä¸­ç¼–å†™å®ƒã€‚

`transferFrom`å‡½æ•°å…¶å®æ¥è‡ªäº ERC721 æ ‡å‡†ã€‚æˆ‘ä»¬ä» OpenZeppelin ERC721 å¥‘çº¦ä¸­ç»§æ‰¿äº†è¯¥å‡½æ•°ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥éšæ—¶è°ƒç”¨å®ƒï¼Œå³ä½¿æˆ‘ä»¬æ²¡æœ‰åœ¨å¥‘çº¦ä¸­æ˜¾å¼åœ°ç¼–å†™å®ƒã€‚å¦‚æœæ‰“å¼€`node_modules/@openzeppelin/contracts/token/ERC721/ERC721.sol`ï¼Œåœ¨ç¬¬ 152 è¡Œå¯ä»¥çœ‹åˆ°å‡½æ•°éœ€è¦ä¸€ä¸ª from åœ°å€ã€ä¸€ä¸ª to åœ°å€å’Œä¸€ä¸ª tokenIdã€‚

è¯·æ³¨æ„ï¼Œåœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œæœ€å¥½ä½¿ç”¨`safeTransferFrom`æ–¹æ³•ï¼Œå› ä¸ºå¦åˆ™å¯èƒ½ä¼šå‘ä¸çŸ¥é“ ERC721 åè®®çš„åœ°å€å‘é€ NFTï¼Œå› æ­¤æ— æ³•ä¿è¯èƒ½å¤Ÿæ­£ç¡®å¤„ç† NFTã€‚è¿™æ˜¯ä¸€ä¸ªé«˜çº§ä¸»é¢˜ï¼Œå› æ­¤å¯¹äºæœ¬æ•™ç¨‹æ¥è¯´ï¼Œ`transferFrom`å°±è¶³å¤Ÿäº†ã€‚

æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨`contractWithSigner`ä¸Šçš„`transferFrom`æ¥å®Œæˆ`handleSubmit`åŠŸèƒ½:

```js
const resp = await contractWithSigner.transferFrom(
  address,
  recipient,
  tokenId,
);
const rec = await resp.wait();

console.log(rec);
```

æœ‰äº†å®ƒï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥é€šè¿‡è½¬ç§» NFT æ¥æµ‹è¯•å®ƒã€‚ä½ åº”è¯¥åœ¨ä½ çš„ MetaMask é’±åŒ…é‡Œåˆ›å»ºå¦ä¸€ä¸ªè´¦æˆ·ï¼Œç‚¹å‡»å³ä¸Šè§’çš„å½©è‰²å¤§æŒ‰é’®ï¼Œç„¶åç‚¹å‡»â€œåˆ›å»ºè´¦æˆ·â€ã€‚

ä¸€æ—¦ä½ è¿™æ ·åšäº†ï¼Œä½ å°†æ‹¥æœ‰å¦ä¸€ä¸ªç”±ä½ çš„ç§é’¥æ§åˆ¶çš„å…¬å…±åœ°å€ã€‚å¤åˆ¶è¯¥åœ°å€å¹¶å°†å…¶ç²˜è´´åˆ°**æ”¶ä»¶äººåœ°å€**å­—æ®µã€‚ç„¶åå›åˆ°ä½ åŸæ¥çš„è´¦æˆ·ï¼Œç‚¹å‡»**è½¬ç§» NFT** ã€‚

æ¥å— MetaMask ä¸Šçš„äº¤æ˜“åï¼Œæ‚¨çš„ç¬¬äºŒä¸ªå¸æˆ·å°†æ‹¥æœ‰è¯¥æ¡ç›®(ä¸€æ—¦äº¤æ˜“è¢«ç¡®è®¤)ï¼

##### *æ¸…å• 7.1:è½¬ç§» NFT çš„ä»£ç *

```js
const handleSubmit = useCallback(
  .
  .
  .
  // Connect smart contract to signer
  const signer = provider.getSigner();
  const contractWithSigner = contract.connect(signer);

  // Call `transferFrom` method of smart contract
  const resp = await contractWithSigner.transferFrom(
    address,
    recipient,
    tokenId,
  );
  const rec = await resp.wait();

  console.log(rec);
  .
  .
  .
);
```

# æŒ‘æˆ˜<g-emoji class="g-emoji" alias="weight_lifting" fallback-src="https://github.githubassets.cimg/icons/emoji/unicode/1f3cb.png">ğŸ‹ï¸</g-emoji>

åœ¨ä»£ç ç¼–è¾‘å™¨ä¸­å¯¼èˆªåˆ°`components/TransferNFTForm/TransferNFTForm.tsx`ï¼ŒæŒ‰ç…§æ³¨é‡Šä¸­åŒ…å«çš„æ­¥éª¤å®Œæˆç¼–å†™ç”¨äºä¼ è¾“ NFT çš„`handleSubmit`å‡½æ•°ã€‚æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæè¿°ï¼Œä»¥åŠä¸€ä¸ªé“¾æ¥ï¼Œé“¾æ¥åˆ°æ‚¨ä¸ºäº†å®ç°æ¯ä¸€è¡Œè€Œéœ€è¦æŸ¥çœ‹çš„æ–‡æ¡£ã€‚ç›¸å…³ä»£ç å—ä¹ŸåŒ…å«åœ¨ä¸‹é¢çš„**æ¸…å• 7.2** ä¸­ã€‚

##### *æ¸…å• 7.2:è½¬ç§» NFT çš„è¯´æ˜*

```js
const handleSubmit = useCallback(
  .
  .
  .
  // Connect smart contract to signer
  // Call `transferFrom` method of smart contract
  .
  .
  .
);
```

ä¸€æ—¦ä½ å®Œæˆäº†ä»£ç ï¼Œä½ å¯ä»¥é€šè¿‡å°†ä½ æƒ³è¦è½¬ç§» NFT çš„è´¦æˆ·åœ°å€ç²˜è´´åˆ°æ–‡æœ¬è¾“å…¥ä¸­ï¼Œç„¶åç‚¹å‡»**è½¬ç§» NFT** å¹¶åœ¨ MetaMask ä¸­ç¡®è®¤äº¤æ˜“ï¼Œæ¥å°è¯•è½¬ç§»ä¸€ä¸ª NFT æ¡ç›®:

[![Screenshot of transfer](img/28a2aa9918a24ef936caaa776066ce3d.png)](https://raw.githubusercontent.com/figment-networks/learn-tutorials/master/mirror/assets/transfer.jpg)