# solana/solana-wallet/wallet-tutorial-step-4

> åŸæ–‡ï¼š<https://github.com/figment-networks/learn-tutorials/blob/master/solana/solana-wallet/wallet-tutorial-step-4.md>

æˆ‘ä»¬ç°åœ¨å·²ç»ç”Ÿæˆäº†ä¸€ä¸ªé’±åŒ…ï¼Œå¹¶å°†å…¶è¿æ¥åˆ°ç´¢æ‹‰çº³åŒºå—é“¾ã€‚åœ¨ä¸Šä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬ç¡®è®¤äº†æˆ‘ä»¬è´¦æˆ·çš„ä½™é¢ä¸ºé›¶ï¼Œä½†æ˜¯ä¸ºæˆ‘ä»¬çš„è´¦æˆ·æä¾›èµ„é‡‘ä»¥ä¾¿æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä½™é¢çš„å˜åŒ–ï¼Œè¿™ä¸æ˜¯å¾ˆå¥½å—ï¼Ÿ

ä½ å¯èƒ½æƒ³çŸ¥é“æˆ‘ä»¬ç°åœ¨æ˜¯å¦éœ€è¦è½¬ç§»çœŸå®çš„é’±æ¥æµ‹è¯•è´¦æˆ·ï¼Œä½†æ˜¯æ­£å¦‚æˆ‘ä»¬åœ¨[æ­¥éª¤ 3](https://learn.figment.io/tutorials/solana-wallet-step-3) ä¸­è®¨è®ºçš„ï¼ŒåŒºå—é“¾çš„ devnet é€šå¸¸ä¼šæä¾›ä¸€ç§æµ‹è¯•äº¤æ˜“çš„æ–¹æ³•ï¼Œè€Œä¸ä¼šå±åŠçœŸå®çš„ç»æµä»·å€¼ã€‚

åœ¨è¿™ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬å°†æ„å»ºå…è®¸ç”¨æˆ·å°† SOL ä»¤ç‰Œâ€œç©ºæŠ•â€åˆ°ä»–ä»¬çš„ devnet å¸æˆ·ä¸­çš„åŠŸèƒ½ã€‚åœ¨åŠ å¯†é¢†åŸŸï¼Œç©ºæŠ•æ˜¯åè®®å…è´¹å‘è´¦æˆ·æŒæœ‰äººåˆ†å‘ä»¤ç‰Œçš„ä¸€ç§æ–¹å¼ã€‚

[![Figure 5: We're about reinforce our supply lines with some devnet SOL](img/124352b4c9f63f69f7b1b4009fcd5e3b.png)](https://raw.githubusercontent.com/figment-networks/learn-tutorials/master/solana/solana-wallet/assets/airdrop.jpeg)

{% label %}å›¾ 5:æˆ‘ä»¬å‡†å¤‡ç”¨ä¸€äº› devnet SOL æ¥åŠ å¼ºæˆ‘ä»¬ä¾›åº”é“¾

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†åˆ©ç”¨ Solana å†…ç½®çš„æœ¬åœ° devnet airdrop åŠŸèƒ½æ¥ä¸ºæˆ‘ä»¬çš„å¸æˆ·æä¾›èµ„é‡‘ã€‚è¿™ä¸åŒºå—é“¾åè®®å’ŒåŠ å¯†é¡¹ç›®æ‰§è¡Œçš„ mainnet ç©ºæŠ•ç›¸åï¼Œåè€…é€šå¸¸æ˜¯ä¸ºäº†å¥–åŠ±æ—©æœŸé‡‡ç”¨è€…æˆ–è´¡çŒ®è€…è€Œå‘å¸ƒçš„ã€‚

{ % side note title = " Box 4.1:Growth Hacking with Aidrops " % }åè®®å’Œå…¬å¸ä½¿ç”¨ç©ºæŠ•ä½œä¸ºä¸€ç§è¥é”€æŠ€æœ¯æ¥å®£ä¼ ä»–ä»¬çš„äº§å“å¹¶ä¿ƒè¿›ç”¨æˆ·å¢é•¿ã€‚é€šè¿‡å‘åœ¨ç‰¹å®šæ—¥æœŸå‰åŠ å…¥æˆ–å¯¹åè®®æ‰§è¡Œäº†æŸäº›æ“ä½œçš„ç”¨æˆ·å‘æ”¾ä»¤ç‰Œï¼Œä»–ä»¬å¯ä»¥ä¼ æ’­æ¶ˆæ¯ï¼Œå¦‚æœç©ºæŠ•æˆåŠŸï¼Œè®©æ›´å¤šäººçŸ¥é“ä»–ä»¬æ­£åœ¨æ„å»ºçš„è§£å†³æ–¹æ¡ˆã€‚ä¾‹å¦‚ï¼Œæ’æ˜Ÿå‘å±•åŸºé‡‘ä¼š(Stellar Development Foundation)åœ¨ 2018 å¹´åº•è¿›è¡Œäº†ä¸€æ¬¡ 1.25 äº¿ç¾å…ƒçš„ç©ºæŠ•ï¼Œä»¥å°†æ’æ˜Ÿæµæ˜é€åˆ°åŠ å¯†ç”¨æˆ·æ‰‹ä¸­ï¼Œå¹¶è¯•å›¾æ¨åŠ¨ä¸»æµé‡‡ç”¨ã€‚

åœ¨é’±åŒ…ä»ªè¡¨ç›˜çš„å³ä¾§ï¼Œä½ ä¼šå‘ç°ä¸€ä¸ªæ ‡ç­¾ä¸º **Airdrop** çš„æŒ‰é’®ã€‚æ‚¨å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œå¦‚æœæ‚¨æ›´æ”¹ç½‘ç»œï¼Œæ­¤æŒ‰é’®ä¼šæ¶ˆå¤±ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬å®ç°çš„åŠŸèƒ½ä»…å¯¹ devnet æœ‰æ•ˆã€‚æ­¤å¤–ï¼Œä½ ä¼šæ³¨æ„åˆ°ä¸€ä¸ªå·¥å…·æç¤ºå›¾æ ‡ï¼Œé€šçŸ¥ç”¨æˆ·ç‚¹å‡»**ç©ºæŠ•**ï¼Œä»–ä»¬å°†æ”¶åˆ° 1 ä¸ª devnet SOLã€‚

ä¸€æ—¦æˆ‘ä»¬å®Œæˆè¿™ä¸€æ­¥ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»**ç©ºæŠ•**æ—¶ï¼Œæˆ‘ä»¬çš„ä½™é¢å°†è‡ªåŠ¨å¢åŠ ã€‚è¿™å°†ä¸º[ç¬¬ 5 æ­¥](https://learn.figment.io/tutorials/solana-wallet-step-5)åšå¥½å‡†å¤‡ï¼Œæˆ‘ä»¬å°†æ„å»ºå‘å…¶ä»– Solana è´¦æˆ·å‘é€èµ„é‡‘çš„åŠŸèƒ½ã€‚

# å®æ–½ <g-emoji class="g-emoji" alias="jigsaw" fallback-src="https://github.githubassets.cimg/icons/emoji/unicode/1f9e9.png">ğŸ§©</g-emoji>

åœ¨[ç¬¬ 3 æ­¥](https://learn.figment.io/tutorials/solana-wallet-step-3)ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†å¦‚ä½•å®ä¾‹åŒ–ä¸€ä¸ªä¸ Solana ç½‘ç»œçš„è¿æ¥ï¼Œä»¥åŠå¦‚ä½•å°†æˆ‘ä»¬è´¦æˆ·çš„å…¬é’¥å±æ€§èµ‹ç»™ä¸€ä¸ªå˜é‡ã€‚æˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œåº”ç”¨ç›¸åŒçš„ä»£ç ï¼Œå¼€å§‹ç¼–å†™`utils/index.ts`ä¸­çš„`handleAirdrop`å‡½æ•°:

```js
const connection = new Connection(clusterApiUrl(network), "confirmed");
const publicKey = account.publicKey;
```

## ç©ºæŠ•åŠŸèƒ½

æŒ‰ç…§æˆ‘ä»¬ä¹‹å‰æœç´¢æ–‡æ¡£å…³é”®å­—çš„å¯å‘ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥æœç´¢â€œairdrop â€,çœ‹çœ‹æ˜¯å¦æœ‰æˆ‘ä»¬å¯ä»¥åˆ©ç”¨çš„åŠŸèƒ½ã€‚ç§ï¼Œ`Connection`ç±»æœ‰ä¸€ä¸ªçœ‹èµ·æ¥å¾ˆæœ‰å‰é€”çš„`requestAirdrop`å‡½æ•°ã€‚å®ƒæ¥å—ä¸¤ä¸ªå±æ€§â€”â€”`to: PublicKey`å’Œ`lamports: number`â€”â€”å¹¶è¿”å›ä¸€ä¸ªè§£æä¸ºå­—ç¬¦ä¸²çš„`promise`ã€‚

ä½ å¯èƒ½æƒ³çŸ¥é“â€œlamportâ€æ˜¯ä»€ä¹ˆã€‚ç´¢æ‹‰çº³çš„åŸç”Ÿä»¤ç‰Œ SOL å¯åˆ†ä¸º 10 äº¿ä¸ªç«¯å£ã€‚ä½ å¯ä»¥æŠŠå…°æ³¢ç‰¹æƒ³è±¡æˆç´¢å°”ä¸€ç¾å…ƒçš„å‡ åˆ†ä¹‹ä¸€ã€‚

[![Figure 6: This is also a lamport. Leslie Lamport is the lamport's namesake. He's a computer scientist who has made key contributions to distributed systems](img/9e1f64649b9bb3c7a8742c99adb2f3c4.png)](https://raw.githubusercontent.com/figment-networks/learn-tutorials/master/solana/solana-wallet/assets/leslie.jpeg)

{% label %}å›¾ 6:è¿™ä¹Ÿæ˜¯ä¸€ä¸ª lamportã€‚è±æ–¯åˆ©Â·å…°æ³¢ç‰¹ä¸å…°æ³¢ç‰¹åŒåã€‚ä»–æ˜¯ä¸€åè®¡ç®—æœºç§‘å­¦å®¶ï¼Œå¯¹åˆ†å¸ƒå¼ç³»ç»Ÿåšå‡ºäº†é‡è¦è´¡çŒ®

ä»æ–‡æ¡£ä¸­è¿˜ä¸æ¸…æ¥šï¼Œä½†æ˜¯ç»è¿‡ä¸€ç‚¹ç ”ç©¶ï¼Œæ‚¨å¯ä»¥ç¡®è®¤è¿”å›çš„å­—ç¬¦ä¸²ä»£è¡¨ä¸€ä¸ªç¡®è®¤ ID æˆ–`signature`ã€‚ä»åŠŸèƒ½è®¾è®¡çš„è§’åº¦æ¥çœ‹ï¼Œè¯·æ±‚ç©ºæŠ•åº”è¯¥ä¼ é€’å¸æˆ·åœ°å€(å…¬é’¥)å’Œæˆ‘ä»¬è¯·æ±‚çš„èµ„é‡‘æ•°é‡ï¼Œè¿™ä¼¼ä¹æ˜¯åˆç†çš„ã€‚

```js
const confirmation = await connection.requestAirdrop(
  publicKey,
  1000000000
);
```

ä¸Šè¿°åŠŸèƒ½å°†å·¥ä½œå¾—å¾ˆå¥½ï¼Œæˆ‘ä»¬çš„ç”¨æˆ·å°†èƒ½å¤Ÿåœ¨æ¯æ¬¡ç‚¹å‡»æŒ‰é’®æ—¶ç©ºæŠ• 1 SOLã€‚ä½†æ˜¯æ‚¨å¯ä»¥é€šè¿‡ä» web3.js å¯¼å…¥å¹¶ä¼ å…¥`LAMPORTS_PER_SOL`å¸¸é‡æ¥ç¨å¾®æ¸…ç†ä¸€ä¸‹ï¼Œè¿™ä¸ªå¸¸é‡æœ¬èº«å°±ç­‰äºåäº¿ã€‚

```js
const confirmation = await connection.requestAirdrop(
  publicKey,
  LAMPORTS_PER_SOL
);
```

{ % side note title = " Box 4.2:Devnet ç©ºæŠ•ä»ä½•è€Œæ¥ï¼Ÿ"%} Devnet airdrops æ¥è‡ªæ™ºèƒ½åˆçº¦ï¼Œéƒ¨ç½²äº†è¾ƒé«˜çš„åˆå§‹ä»¤ç‰Œä½™é¢å’Œè½¬ç§»åŠŸèƒ½ï¼Œå…è®¸ä»»ä½•äººå‘å…¶ Devnet å¸æˆ·è¯·æ±‚ä»¤ç‰Œã€‚è¿™äº›æ‰€è°“çš„æ°´é¾™å¤´æ—¨åœ¨å¸®åŠ©å¼€å‘äººå‘˜åœ¨ mainnet ä¸Šçº¿ä¹‹å‰æµ‹è¯• dAppsã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œairdrop å‡½æ•°å‘æ™ºèƒ½åˆåŒå‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œé€šè¿‡æ›´æ–°ä¸¤ä¸ªå¸æˆ·çš„ä½™é¢ï¼Œå°† devnet SOL ä»åŸå§‹ä¾›åº”è½¬ç§»åˆ°æ‚¨çš„å¸æˆ·ã€‚

## ç¡®è®¤ç©ºæŠ•

æœ€åï¼Œåœ¨æˆ‘ä»¬å¯ä»¥è‡ªåŠ¨åˆ·æ–°æˆ‘ä»¬è´¦æˆ·çš„ä½™é¢ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•æ¥ç¡®ä¿åœ¨æˆ‘ä»¬è°ƒç”¨`refreshBalance`ä¹‹å‰ï¼ŒåŒºå—é“¾åˆ†ç±»è´¦å·²ç»æ›´æ–°äº†æˆ‘ä»¬ç©ºæŠ•çš„èµ„é‡‘ã€‚ä¸ä»»ä½•æ•°æ®åº“ç±»å‹çš„æ“ä½œä¸€æ ·ï¼ŒåŒºå—é“¾çŠ¶æ€å˜åŒ–æ˜¯å¼‚æ­¥çš„ã€‚äº‹å®ä¸Šï¼Œé‰´äºå¤§å¤šæ•°åŒºå—é“¾åè®®çš„åˆ†æ•£æ€§è´¨ï¼Œä¸€äº›æ›´æ–°[å¯èƒ½éœ€è¦ä¸€æ®µæ—¶é—´](https://twitter.com/CryptoKitties/status/937444644740198400?s=20)ã€‚

è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨åˆ·æ–°å¹³è¡¡ä¹‹å‰ç­‰å¾…ç©ºæŠ•è¢«ç¡®è®¤ã€‚å†æ¬¡æœç´¢æ–‡æ¡£ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„`Connection`ç±»åŒ…å«ä¸€ä¸ª`confirmTransaction`æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªç¡®è®¤`signature`å’Œ`commitment`ï¼Œå¹¶è¿”å›ä¸€ä¸ª`promise`ï¼Œä¸€æ—¦äº¤æ˜“è¢«ç½‘ç»œç¡®è®¤ï¼Œè¯¥æ–¹æ³•å°±è¿›è¡Œè§£æã€‚

```js
await connection.confirmTransaction(confirmation, "confirmed");
```

æ³¨æ„ï¼Œæˆ‘ä»¬ä¸éœ€è¦åœ¨è¿™é‡Œç»™ç¡®è®¤èµ‹å€¼ä¸€ä¸ªå˜é‡ã€‚ä¸€æ—¦æˆ‘ä»¬çš„é’±åŒ…çŸ¥é“äº¤æ˜“è¢«ç½‘ç»œç¡®è®¤ï¼Œå®ƒå°±å¯ä»¥è°ƒç”¨`refreshBalance`å¹¶æ›´æ–°è´¦æˆ·çš„ä½™é¢ã€‚

```js
return await refreshBalance(network, account);
```

çƒ­å¿ƒçš„è¯»è€…å¯èƒ½å·²ç»æ³¨æ„åˆ°æˆ‘ä»¬è´¦æˆ·çš„ä½™é¢çœ‹èµ·æ¥ä¸å¯¹ã€‚å®ƒåº”è¯¥è¯»å– 1 ä¸ª SOLï¼Œå´è¯»å–äº† 10 äº¿ä¸ª SOLã€‚ç°åœ¨æˆ‘ä»¬çŸ¥é“äº† lamports æ˜¯ä»€ä¹ˆï¼Œå®ƒä»¬ä¸ SOL çš„å…³ç³»ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨`LAMPORTS_PER_SOL`å¸¸é‡ï¼Œæˆ‘ä»¬å¯ä»¥è¿”å›åˆ°æˆ‘ä»¬çš„`refreshBalance`å‡½æ•°ï¼Œé€šè¿‡æ›´æ–°å®ƒçš„è¿”å›å€¼æ¥ä¿®å¤è¿™ä¸ª bugã€‚

```js
return balance / LAMPORTS_PER_SOL;
```

[![Figure 7: Getting close to the summit](img/6a5bef994e2be80950a0191157b3ceb3.png)](https://raw.githubusercontent.com/figment-networks/learn-tutorials/master/solana/solana-wallet/assets/climbing.jpeg)

{% label %}å›¾ 7:æ¥è¿‘é¡¶å³°

æˆ‘ä»¬å·²ç»èµ°è¿‡äº†æ¼«é•¿çš„é“è·¯ï¼Œç°åœ¨å¯¹åŒºå—é“¾åè®®çš„å·¥ä½œåŸç†æœ‰äº†æ›´å¥½çš„äº†è§£ã€‚æˆ‘ä»¬é€šè¿‡åˆ›å»ºå¯†é’¥å¯¹æ¥æ„å»ºé’±åŒ…ï¼Œè¿æ¥åˆ°ç½‘ç»œï¼Œä»ä¸­è·å–æ•°æ®ï¼Œå¹¶æˆåŠŸè¯·æ±‚æµ‹è¯•ä»¤ç‰Œã€‚æˆ‘ä»¬å·²ç»è®¨è®ºäº†æ‰€æœ‰åŸºæœ¬çš„ Web 3 äº¤äº’ï¼Œé™¤äº†æœ€é‡è¦çš„ä¸€ä¸ªâ€”â€”è½¬è´¦ã€‚æˆ‘ä»¬å°†åœ¨[æ­¥éª¤ 5](https://learn.figment.io/tutorials/solana-wallet-step-5) ä¸­åšä¸‹ä¸€æ­¥ï¼Œæ‰€ä»¥åšå¥½å‡†å¤‡ã€‚

##### *æ¸…å• 4.2:ç©ºæŠ•èµ„é‡‘çš„ä»£ç *

```js
const handleAirdrop = async (network: Cluster, account: Keypair | null) => {
  if (!account) return;

  try {
    const connection = new Connection(clusterApiUrl(network), "confirmed");
    const publicKey = account.publicKey;
    const confirmation = await connection.requestAirdrop(
      publicKey,
      LAMPORTS_PER_SOL
    );
    const result = await connection.confirmTransaction(confirmation, "confirmed");
    return await refreshBalance(network, account);
  } catch (error) {
    console.log(error);
    return;
  }
};

const refreshBalance = async (network: Cluster, account: Keypair | null) => {
  if (!account) return;

  try {
    .
    .
    .
    return balance / LAMPORTS_PER_SOL;
  } catch (error) {
    .
    .
    .
  }
};
```

# æŒ‘æˆ˜<g-emoji class="g-emoji" alias="weight_lifting" fallback-src="https://github.githubassets.cimg/icons/emoji/unicode/1f3cb.png">ğŸ‹ï¸</g-emoji>

å¦‚æœä½ ä»`/wallet`é¡µé¢æ‰“å¼€æµè§ˆå™¨çš„æ§åˆ¶å°ï¼Œç‚¹å‡» **Airdrop** æŒ‰é’®ï¼Œä½ ä¼šæ³¨æ„åˆ°ä¸€æ¡æ¶ˆæ¯ï¼Œä¸Šé¢å†™ç€:â€œAirdrop åŠŸèƒ½å°šæœªå®ç°ï¼â€ã€‚åœ¨ç¼–è¾‘å™¨ä¸­å¯¼èˆªåˆ°`utils/index.ts`,æŒ‰ç…§æ³¨é‡Šä¸­åŒ…å«çš„æ­¥éª¤å®Œæˆ`handleAirdrop`å‡½æ•°çš„ç¼–å†™ã€‚æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæè¿°ï¼Œä»¥åŠä¸€ä¸ªé“¾æ¥ï¼Œé“¾æ¥åˆ°æ‚¨ä¸ºäº†å®ç°æ¯ä¸€è¡Œè€Œéœ€è¦æŸ¥çœ‹çš„æ–‡æ¡£ã€‚ç›¸å…³ä»£ç å—ä¹ŸåŒ…å«åœ¨ä¸‹é¢çš„æ¸…å• 4.1 ä¸­ã€‚

##### *æ¸…å• 4.1:ç¼–å†™ airdrop å‡½æ•°çš„è¯´æ˜*

```js
const handleAirdrop = async (network: Cluster, account: Keypair | null) => {
  // This line ensures the function returns before running if no account has been set
  if (!account) return;

  try {
    // (a) review the import guidance on line 1
    // (b) instantiate a connection using clusterApiUrl with the active network passed in as an argument
    // Documentation References:
    //   https://solana-labs.github.io/solana-web3.js/classes/Connection.html
    //   https://solana-labs.github.io/solana-web3.js/modules.html#clusterApiUrl
    console.log("Airdrop functionality not implemented yet!");
    const connection = "";

    // (c) get the key using one of the accessors on the account passed in as an argument
    // Documentation Reference: https://solana-labs.github.io/solana-web3.js/classes/Keypair.html
    const publicKey = "";

    // (d) request the airdrop using the connection instance
    // Note that you should include the amount to airdrop (consider using the LAMPORTS_PER_SOL constant from the web3.js library)
    // Documentation Reference: https://solana-labs.github.io/solana-web3.js/classes/Connection.html
    const confirmation = "";

    // (d) confirm the transaction using the connection instance and the confirmation string returned from the airdrop
    // Documentation Reference: https://solana-labs.github.io/solana-web3.js/classes/Connection.html
    const result = "";

    // (e) Refactor the refreshBalance function to return balances in SOL instead of Lamports (Hint: LAMPORTS_PER_SOL)

    // This line returns the balance after the airdrop so the UI can be refreshed
    return await refreshBalance(network, account);
    // (f) You can now delete the console.log statement since the function is implemented!
  } catch (error) {
    console.log(error);
    return;
  }
};
```