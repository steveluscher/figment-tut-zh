# ä»‹ç»

> åŸæ–‡:[https://github . com/fig ment-networks/learn-tutorials/blob/master/celo/celo-truffle-deploy . MD](https://github.com/figment-networks/learn-tutorials/blob/master/celo/celo-truffle-deploy.md)

å‡è®¾ä½ å†™äº†ä¸€ä»½èªæ˜çš„åˆåŒã€‚æ‚¨å°†å¦‚ä½•åœ¨ Celo ç½‘ç»œä¸Šéƒ¨ç½²å®ƒï¼Ÿ

ç­”æ¡ˆæ˜¯ä½ å¯ä»¥åœ¨ Truffle çš„å¸®åŠ©ä¸‹åšåˆ°è¿™ä¸€ç‚¹â€”â€”è¿™æ˜¯ä¸€ä¸ªå¼€å‘ç¯å¢ƒï¼Œå®ƒä½¿å¾—éƒ¨ç½²æ™ºèƒ½åˆçº¦æ›´åŠ å®¹æ˜“ã€‚

ç»§ç»­é˜…è¯»ï¼Œäº†è§£å¦‚ä½•ä½¿ç”¨ Truffle åœ¨ Celo ä¸Šéƒ¨ç½²æ™ºèƒ½åˆçº¦ï¼

# å…ˆå†³æ¡ä»¶

å¦‚æœæ‚¨å·²ç»ç¼–å†™äº†ä¸€ä¸ªæƒ³è¦éƒ¨ç½²åˆ° Celo ä¸Šçš„æ™ºèƒ½å¥‘çº¦ï¼Œé‚£ä¹ˆæœ¬æ•™ç¨‹å°†ä¼šéå¸¸æœ‰ç”¨ã€‚å¦‚æœæ²¡æœ‰ï¼Œä¹Ÿæ²¡å…³ç³»ï¼Œå› ä¸ºæˆ‘ä»¬å°†éƒ¨ç½²é»˜è®¤çš„ Truffle è¿ç§»åˆåŒã€‚

åœ¨ä½ ç»§ç»­ä¹‹å‰ï¼Œç¡®ä¿ä½ å·²ç»å®‰è£…äº†æ¾éœ²ã€‚å¦‚æœæ²¡æœ‰ï¼Œè¯·åœ¨æ‚¨çš„ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹ä»£ç è¡Œ:

`npm install -g truffle`

# é¡¹ç›®è®¾ç½®

é¦–å…ˆï¼Œæ‰“å¼€ç»ˆç«¯å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®æ–‡ä»¶å¤¹ã€‚æˆ‘ä»¬ç§°ä¹‹ä¸º celoSmartContract:

`mkdir celoSmartContract && cd celoSmartContract`

æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬ç”¨ NPMã€[èŠ‚ç‚¹åŒ…ç®¡ç†å™¨](https://npmjs.com)åˆå§‹åŒ–é¡¹ç›®ç›®å½•ï¼Œä½¿ç”¨-y æ ‡å¿—æ¥å—é»˜è®¤å‚æ•°:

`npm init -y`

åœ¨ NPM åˆå§‹åŒ–äº†é¡¹ç›®ç›®å½•ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…ä¸€äº›é¢å¤–çš„åŒ…ã€‚ä»¥ä¸‹æ˜¯æˆ‘ä»¬éœ€è¦å®‰è£…çš„å†…å®¹çš„æ¦‚è¿°:

*   contract kitâ€”â€”è¿™æ˜¯ä¸€ä¸ªç”± Celo å›¢é˜Ÿåˆ›å»ºçš„åŒ…ï¼Œç”¨äºå¸®åŠ© Celo å¼€å‘
*   è¿™æ˜¯ä¸€ä¸ªç”¨æ¥è¯»å–æˆ‘ä»¬ä»£ç ä¸­çš„ç¯å¢ƒå˜é‡çš„åŒ…
*   æœ€åï¼ŒWeb3 åº“æ–¹ä¾¿äº†æˆ‘ä»¬ä¸åŒºå—é“¾çš„äº’åŠ¨

ä½¿ç”¨ä»¥ä¸‹è½¯ä»¶å®‰è£…ä¸Šè¿°æ‰€æœ‰è½¯ä»¶:

`npm install --save @celo/contractkit dotenv web3`

å®‰è£…å®Œ NPM åŒ…åï¼Œæˆ‘ä»¬éœ€è¦åˆå§‹åŒ–é¡¹ç›®ä¸­çš„ Truffle:

`truffle init`

ä¸‹é¢æ˜¯æˆåŠŸè¿è¡Œçš„ truffle init çš„æ ·å­:

[![truffle init](../Images/85fb707fbfc302a0b188e7ad963a27ea.png)T2ã€‘](https://camo.githubusercontent.com/96639b87ce3a287a678cff74b466d840f84b83a42403fae9b23287163e275cee/68747470733a2f2f692e696d6775722e636f6d2f4a46367a646f542e706e67)

# ç®€å•çš„æ™ºèƒ½åˆåŒ

ç°åœ¨æˆ‘ä»¬å·²ç»åˆå§‹åŒ–äº† Truffleï¼Œæˆ‘ä»¬å°†ç»§ç»­æˆ‘ä»¬å°†è¦éƒ¨ç½²çš„æ™ºèƒ½å¥‘çº¦ã€‚

ä½œä¸ºå‚è€ƒï¼Œæ‚¨çš„é¡¹ç›®ç»“æ„ç°åœ¨åº”è¯¥å¦‚ä¸‹æ‰€ç¤º:

[![project structure](../Images/59f0eec4a52a4f38ab2b3b66759d98d4.png)T2ã€‘](https://camo.githubusercontent.com/089cdaddf4682328e54509cbe1b127fb6c2a9e8f4df9ed7ac82d6ed3cefaede1/68747470733a2f2f692e696d6775722e636f6d2f4a705471574c4a2e706e67)

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†éƒ¨ç½²ç”± Truffle åˆå§‹åŒ–çš„ **Migrations.sol** å¥‘çº¦ã€‚

**æ³¨æ„**:å¦‚æœä½ æƒ³éƒ¨ç½²ä½ å†™çš„æ™ºèƒ½åˆåŒï¼Œç”¨ä½ è‡ªå·±çš„ Solidity æ–‡ä»¶æ›¿æ¢ **contracts/** æ–‡ä»¶å¤¹ä¸­çš„ **Migrations.sol** æ–‡ä»¶ã€‚

æ— è®ºå¦‚ä½•ï¼Œä¸‹é¢æ˜¯é»˜è®¤çš„ **Migrations.sol** æ–‡ä»¶çš„æ ·å­:

```
// SPDX-License-Identifier: MIT
pragma  solidity >=0.4.22 <0.9.0;

contract Migrations {

  address public owner =  msg.sender;
  uint  public last_completed_migration;

  modifier restricted() {
    require(
	  msg.sender == owner,"This function is restricted to the contract's owner");
	  _;
  }

  function setCompleted(uint completed) public restricted {
	last_completed_migration = completed;
  }
} 
```

æˆ‘ä»¬ä¸ä¼šåœ¨æœ¬æ•™ç¨‹ä¸­è®¨è®ºè¿™ä¸ªæ™ºèƒ½å¥‘çº¦ï¼Œä½†æ˜¯å¦‚æœä½ æƒ³å­¦ä¹  Solidityï¼Œè¯·éšæ„æµè§ˆ Figment Learn ä¸Šçš„å…¶ä»–æ•™ç¨‹ï¼

## è¿ç§»/æ–‡ä»¶å¤¹

migrations/æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶ç”¨ä½œéƒ¨ç½²è„šæœ¬ã€‚åœ¨ Truffle ä¸­ï¼Œè¿™äº›éƒ¨ç½²è„šæœ¬è¢«ç§°ä¸ºè¿ç§»ã€‚å¯¹äºæ‚¨æƒ³è¦éƒ¨ç½²çš„æ¯ä¸ª Solidity æ–‡ä»¶ï¼Œæ‚¨å°†éœ€è¦ä¸€ä¸ªç›¸åº”çš„è¿ç§»ã€‚

æœ€ç®€å•çš„æƒ…å†µæ˜¯ï¼Œè¿ç§»çœ‹èµ·æ¥åƒä¸‹é¢çš„`1_initial_migration.js`æ–‡ä»¶:

```
const  Migrations = artifacts.require("Migrations");

module.exports = function (deployer)  {
  deployer.deploy(Migrations);
}; 
```

è®©æˆ‘ä»¬æŠŠå®ƒåˆ†è§£ä¸€ä¸‹ã€‚

åœ¨æ–‡ä»¶çš„é¡¶éƒ¨ï¼Œartifacts.require()è¡Œè·å–æˆ‘ä»¬å°†è¦éƒ¨ç½²çš„å¥‘çº¦ã€‚è¯¥åç§°åº”å§‹ç»ˆä¸ Solidity åˆåŒå®šä¹‰ç›¸åŒ¹é…ã€‚åœ¨æˆ‘ä»¬çš„è¿ç§»åˆåŒä¸­ï¼ŒåˆåŒå®šä¹‰å¦‚ä¸‹:

`contract Migrations {`

æ¥ä¸‹æ¥ï¼Œè„šæœ¬é€šè¿‡æ¥å—ä¸€ä¸ª`deployer`å¯¹è±¡çš„`module.exports()`è¯­æ³•å¯¼å‡ºä¸€ä¸ªå‡½æ•°ã€‚deployer å¯¹è±¡ç”¨äºç®¡ç† Truffle çš„ä¸€äº›éƒ¨ç½²ä»»åŠ¡ï¼Œå¹¶ä¸”å°†ç”¨äºä» Truffle æ–¹é¢éƒ¨ç½²å¥‘çº¦ã€‚

å°±æ˜¯è¿™æ ·ï¼æœ€ç®€å•åœ°è¯´ï¼Œè¿ç§»æ—¶é—´å¾ˆçŸ­ã€‚

**æ³¨æ„:**å¦‚æœæ‚¨æƒ³è¦éƒ¨ç½²æ‚¨çš„è‡ªå®šä¹‰ Solidity åˆåŒï¼Œè¯·ä½¿ç”¨ç¼–å·è¿ç§»çº¦å®šåˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œå¹¶ç”¨æ‚¨çš„åˆåŒå®šä¹‰æ›¿æ¢æ‚¨çš„ _CONTRACT_NAME:

```
const YOUR_CONTRACT_NAME = artifacts.require("YOUR_CONTRACT_NAME"); 

module.exports  =  function  (deployer)  {
  deployer.deploy(YOUR_CONTRACT_NAME);
}; 
```

# è¿æ¥åˆ°æµ‹è¯•ç½‘ç»œèŠ‚ç‚¹

ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦è¿æ¥åˆ°ä¸€ä¸ª Celo testnet èŠ‚ç‚¹ï¼Œè¿™å°†æ˜¯æˆ‘ä»¬ä¸ Celo åŒºå—é“¾é€šä¿¡çš„æ–¹å¼ã€‚

é¦–å…ˆï¼Œåœ¨`celoSmartContract`æ–‡ä»¶å¤¹çš„**æ ¹ç›®å½•**ä¸­åˆ›å»ºä¸€ä¸ª. env æ–‡ä»¶ã€‚ä¸ºæ­¤ï¼Œå¯¼èˆªåˆ°é¡¹ç›®æ–‡ä»¶å¤¹çš„é¡¶éƒ¨ï¼Œå¹¶åœ¨ç»ˆç«¯ä¸­é”®å…¥ä»¥ä¸‹å‘½ä»¤:

`touch .env`

å¤ªå¥½äº†ï¼æ‚¨å·²ç»åˆ›å»ºäº†ä¸€ä¸ªåŒ…å«ç¯å¢ƒç§˜å¯†çš„. env æ–‡ä»¶ã€‚ç¡®ä¿ä¸è¦å°†è¿™ä¸ªæ–‡ä»¶æäº¤ç»™ GitHubï¼å°†`.env`æ·»åŠ åˆ°`.gitignore`æ–‡ä»¶ä¸­çš„ä¸€è¡Œï¼Œä»¥é˜²æ­¢å®ƒåœ¨æ‚¨æäº¤æ—¶è¢«å‘é€åˆ° GitHubã€‚

æˆ‘ä»¬å°†ä½¿ç”¨ [DataHub](https://figment.io/datahub/) è¿æ¥åˆ° Celo æµ‹è¯•ç½‘ç»œã€‚å¦‚æœä½ æ²¡æœ‰è´¦æˆ·ï¼Œåœ¨[æ•°æ®ä¸­å¿ƒ](https://datahub.figment.io/)ç½‘ç«™ä¸Šæ³¨å†Œï¼Œç„¶åç»§ç»­æœ¬æ•™ç¨‹ã€‚

æ¥ä¸‹æ¥ï¼Œæ‰“å¼€ã€‚env æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹å˜é‡ï¼Œå…¶ä¸­ **< YOUR_API_KEY >** æ˜¯æ¥è‡ª DataHub çš„ API é”®:

`REST_URL=https://celo-alfajores--rpc.datahub.figment.io/apikey/<YOUR API KEY>/`

**æ³¨æ„:**è¡Œå°¾éœ€è¦æœ‰ä¸€ä¸ª/æ‰èƒ½å·¥ä½œï¼

ç°åœ¨æˆ‘ä»¬å·²ç»ä¿å­˜äº†ç”¨äºè¿æ¥åˆ° Celo testnet çš„ URLã€‚

# è·å¾— Celo å¸æˆ·

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª Celo å¸æˆ·è¿›è¡Œéƒ¨ç½²ã€‚éƒ¨ç½²æ—¶æˆ‘ä»¬éœ€è¦ä¸‰æ ·ä¸œè¥¿:

*   Celo å¸æˆ·åœ°å€
*   Celo å¸æˆ·ç§é’¥
*   è£…æœ‰æµ‹è¯•ç½‘èµ„é‡‘çš„ Celo è´¦æˆ·

é¦–å…ˆï¼Œè®©æˆ‘ä»¬è·å¾—ä¸€ä¸ªå¸æˆ·å’Œä¸€ä¸ªç§é’¥ã€‚åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º`getAccount.js`çš„æ–‡ä»¶ã€‚åœ¨è¯¥æ–‡ä»¶ä¸­ï¼Œç¼–å†™ä»¥ä¸‹å†…å®¹:

```
const ContractKit =  require('@celo/contractkit');

const Web3 =  require('web3');

require('dotenv').config();

const main =  async  ()  =>  {
    const web3 =  new  Web3(process.env.REST_URL);
	const client = ContractKit.newKitFromWeb3(web3);

	const account = web3.eth.accounts.create();

	console.log('address: ', account.address);
    console.log('privateKey: ', account.privateKey);
};

main().catch((err)  =>  {
	console.error(err);
}); 
```

æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ã€‚

é¦–å…ˆï¼Œè„šæœ¬å¯¼å…¥ ContractKitã€Web3 å’Œ dotenvã€‚æ¥ä¸‹æ¥ï¼Œå®ƒä½¿ç”¨ä»¥ä¸‹ä»£ç é€šè¿‡æ‚¨çš„`.env`æ–‡ä»¶ä¸­çš„ REST_URL è¿æ¥åˆ° Celo ç½‘ç»œ:

`const web3 = new Web3(process.env.REST_URL);`

ç„¶åï¼Œå®ƒåœ¨åŒä¸€ä¸ª testnet è¿æ¥ä¸Šåˆ›å»ºä¸€ä¸ªå¸æˆ·ï¼Œä»£ç å¦‚ä¸‹:

`const account = web3.eth.accounts.create();`

ä¹‹åï¼Œæˆ‘ä»¬åªéœ€æ‰“å°å‡ºåœ°å€å’Œç§é’¥ä»¥å¤‡å°†æ¥ä½¿ç”¨ã€‚

**æ³¨:**ä»¥ä¸Šä»£ç æ¥è‡ª [#2ã€‚åˆ›å»ºæ‚¨çš„ç¬¬ä¸€ä¸ª Celo è´¦æˆ·](https://learn.figment.io/network-documentation/celo/tutorial/intro-pathway-celo-basics/2.account)ï¼Œå› æ­¤å¦‚æœæ‚¨éœ€è¦è¯„è®ºï¼Œè¯·éšæ„å›æ”¾ã€‚

æ¥ä¸‹æ¥ï¼Œåœ¨æ‚¨çš„ç»ˆç«¯ä¸­è¿è¡Œè„šæœ¬:

`node getAccount.js`

æ‚¨çš„è¾“å‡ºåº”è¯¥æ‰“å°å‡ºæ‚¨çš„æ–° Celo å¸æˆ·çš„åœ°å€å’Œç§é’¥ã€‚å®ƒçœ‹èµ·æ¥ä¼šåƒè¿™æ ·:

[![output](../Images/e758190431147ddd0f9709af9462659e.png)T2ã€‘](https://camo.githubusercontent.com/85e62204e4c406103e375245afef4c7ee1fb83998bf2b08e168044c4863fd42b/68747470733a2f2f692e696d6775722e636f6d2f7571314c5854662e706e67)

**æ³¨æ„:**éšè—æ‚¨çš„ç§é’¥å¾ˆé‡è¦ï¼è°æ‹¥æœ‰å®ƒï¼Œè°å°±å¯ä»¥åŠ¨ç”¨ä½ æ‰€æœ‰çš„èµ„é‡‘ã€‚

å°†ç§é’¥å¤åˆ¶åˆ°æ‚¨çš„ã€‚env æ–‡ä»¶ï¼Œæ–¹æ³•æ˜¯æ·»åŠ åŒ…å«ä»¥ä¸‹å†…å®¹çš„ä¸€è¡Œ:

`PRIVATE_KEY=YOUR-PRIVATE-KEY`

å…¶ä¸­ **YOUR-PRIVATE-KEY** æ˜¯æ‚¨ä»è„šæœ¬è¾“å‡ºä¸­è·å¾—çš„ç§é’¥ã€‚

ç°åœ¨æ‚¨å·²ç»æœ‰äº†ä¸€ä¸ª Celo å¸æˆ·ï¼Œè·å–åœ°å€å¹¶å°†å…¶ç²˜è´´åˆ° [Celo developer æ°´é¾™å¤´](https://celo.org/developers/faucet)ä¸­ã€‚è¿™å°†ä¸ºæ‚¨æä¾› testnet èµ„é‡‘ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¿™äº›èµ„é‡‘æ¥éƒ¨ç½²æ‚¨çš„æ™ºèƒ½åˆåŒã€‚å¡«å¥½è¡¨æ ¼ï¼Œç­‰å‡ ç§’é’Ÿï¼Œä½ çš„è´¦æˆ·å°±åº”è¯¥åŠ è½½å®Œæ¯•äº†ã€‚

[![funding](../Images/984ae5a1b05f820b8c824cf1376ca484.png)T2ã€‘](https://camo.githubusercontent.com/0c74bcb5251da3397bae2c6901c25218a6ff73befb825a53c546181e95e0db06/68747470733a2f2f692e696d6775722e636f6d2f7a5074575748572e706e67)

# å—èŒé…ç½®

ä½¿ç”¨ **truffle-config.js** æ˜¯ä¸ºäº†å‘Šè¯‰ truffle æ‚¨æƒ³è¦å¦‚ä½•éƒ¨ç½²æ‚¨çš„åˆåŒã€‚

å‡ºäºæˆ‘ä»¬çš„ç›®çš„ï¼Œæˆ‘ä»¬éœ€è¦å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ° truffle-config é¡¹ç›®æ–‡ä»¶ä¸­:

```
const ContractKit = require('@celo/contractkit');
const Web3 = require('web3');

require('dotenv').config({path: '.env'});

// Create connection to DataHub Celo Network node
const web3 = new Web3(process.env.REST_URL);

const client = ContractKit.newKitFromWeb3(web3);

// Initialize account from our private key
const account = web3.eth.accounts.privateKeyToAccount(process.env.PRIVATE_KEY);

// We need to add private key to ContractKit in order to sign transactions
client.addAccount(account.privateKey);

module.exports = {
  compilers: {
    solc: {
      version: "0.6.6",    // Fetch exact version from solc-bin (default: truffle's version)
    }
  },
  networks: {
    test: {
      host: "127.0.0.1",
      port: 7545,
      network_id: "*"
    },
    alfajores: {
      provider: client.connection.web3.currentProvider, // CeloProvider
      network_id: 44787  // latest Alfajores network id
    }
  }
}; 
```

é¦–å…ˆï¼Œé…ç½®æ–‡ä»¶åƒ`getAccounts.js`æ–‡ä»¶ä¸€æ ·å¯¼å…¥ ContractKitã€Web3 å’Œ dotenvã€‚

å®ƒé€šè¿‡ä»è·å– REST_URL æ¥è¿æ¥åˆ°æˆ‘ä»¬çš„ Celo èŠ‚ç‚¹ã€‚ç¯å¢ƒ:

`const web3 = new Web3(process.env.REST_URL);`

ç„¶åï¼Œå®ƒä»`.env`æ–‡ä»¶ä¸­çš„ç§é’¥è·å–æ‚¨çš„å¸æˆ·ï¼Œä»¥ä¾¿ä»æ‚¨çš„å¸æˆ·è¿›è¡Œéƒ¨ç½²:

`const account = web3.eth.accounts.privateKeyToAccount(process.env.PRIVATE_KEY);`

æˆ‘ä»¬è¿˜å°†ç§é’¥æ·»åŠ åˆ° ContractKitï¼Œä»¥ä¾¿ä½¿ç”¨ä»¥ä¸‹å†…å®¹ç­¾ç½²äº¤æ˜“:

`client.addAccount(account.privateKey);`

æœ€åï¼Œåœ¨`module.exports`å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åœ¨`compilers: {`ä¸‹è®¾ç½®æˆ‘ä»¬æƒ³è¦ä½¿ç”¨çš„ Solidity ç‰ˆæœ¬ï¼Œåœ¨ `networks: {`ä¸‹è®¾ç½®æˆ‘ä»¬æƒ³è¦éƒ¨ç½²çš„ç½‘ç»œã€‚

ä¸‹é¢çš„ä»£ç å—å‘Šè¯‰ truffle éƒ¨ç½²åˆ° alfajores (Celo çš„æµ‹è¯•ç½‘ç»œ):

```
alfajores: {
    provider: client.connection.web3.currentProvider, // CeloProvider
    network_id: 44787  // latest Alfajores network id
} 
```

# éƒ¨ç½²

æˆ‘ä»¬å¿«åˆ°äº†ï¼è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œæ£€æŸ¥æ‚¨æ‰€åšçš„ä¸€åˆ‡æ˜¯å¦æ­£ç¡®:

`truffle compile`

å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°ä»¥ä¸‹è¾“å‡º:

[![compile output](../Images/5f8cf2ccab353226db7f9b3e62a66373.png)T2ã€‘](https://camo.githubusercontent.com/c132bce955dd7c13ee2b89d5b9ac1164f99da53830b11a64096b752278735ad9/68747470733a2f2f692e696d6775722e636f6d2f6835593672636f2e706e67)

æ—¢ç„¶æˆ‘ä»¬å·²ç»ç¼–è¯‘äº†æ™ºèƒ½åˆçº¦ï¼Œæœ€åä¸€æ­¥å°±æ˜¯éƒ¨ç½²å®ƒã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥éƒ¨ç½²åˆ° Alfajores testnet:

`truffle migrate --network alfajores`

æ‚¨åº”è¯¥ä¼šçœ‹åˆ°ä»¥ä¸‹éƒ¨ç½²è¾“å‡º:

[![output](../Images/8d2b92f69515a602619959bddc552d0c.png)T2ã€‘](https://camo.githubusercontent.com/c0fd0be76786e0c102b0ee445dbd77113f3f626853b3bad4827575250ed61788/68747470733a2f2f692e696d6775722e636f6d2f683757777161442e706e67)

å¦‚æœä½ çœ‹åˆ°ç±»ä¼¼ä¸Šé¢çš„ä¸œè¥¿ï¼Œä½ å°±åšå¯¹äº†ï¼è¦åœ¨ Celo ç½‘ç»œä¸ŠæŸ¥çœ‹æ‚¨çš„æ™ºèƒ½åˆåŒï¼Œè¯·æ‰“å¼€ [Alfajores å—æµè§ˆå™¨](https://alfajores-blockscout.celo-testnet.org/)ï¼Œå¹¶åœ¨æ‚¨çš„ truffle è¾“å‡ºçš„åˆåŒåœ°å€è¡Œä¸­ç²˜è´´åœ°å€:

`> contract address: 0xc13891Df18E57137c40876ad206a9B0A30dF8CF5`

æ‚¨åº”è¯¥ä¼šåœ¨è¯¥åœ°å€çœ‹åˆ°ä¸€ä¸ªæˆåŠŸçš„åˆåŒéƒ¨ç½²ï¼

[![block explorer](../Images/c9ed177b84a0ed0bff68456efb5bdba3.png)T2ã€‘](https://camo.githubusercontent.com/2d23c68351d5f73727daf04dad01cc6efd9a82e5678789d61436c608865036eb/68747470733a2f2f692e696d6775722e636f6d2f6e6c32383869612e706e67)

# ç»“è®º

æ­å–œä½ ï¼æ‚¨åˆšåˆšä½¿ç”¨ Truffle åœ¨ Celo ç½‘ç»œä¸Šéƒ¨ç½²äº†æ™ºèƒ½åˆçº¦ï¼

ç°åœ¨æ‚¨å·²ç»å®Œæˆäº†æ•™ç¨‹ï¼Œæ‚¨åº”è¯¥å¯¹åœ¨ Celo ç½‘ç»œä¸Šéƒ¨ç½²æ™ºèƒ½åˆçº¦æœ‰äº†åŸºæœ¬çš„äº†è§£ã€‚ä½ å¯ä»¥åˆ›é€ æ— é™çš„å¯èƒ½æ€§ï¼ç°åœ¨è¿˜æ—©ã€‚ä½ å¯ä»¥å°†æœ¬æ•™ç¨‹ä½œä¸ºéƒ¨ç½²ä½ æ¢¦æƒ³ä¸­çš„æ™ºèƒ½åˆçº¦çš„èµ·ç‚¹ <g-emoji class="g-emoji" alias="partying_face" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f973.png">ğŸ¥³</g-emoji>

æœ¬æ•™ç¨‹çš„å®Œæ•´æºä»£ç å¯ä»¥åœ¨ Github ä¸Šæ‰¾åˆ°ã€‚

# åç»­æ­¥éª¤

æ—¢ç„¶æ‚¨å·²ç»äº†è§£äº†å¦‚ä½•åœ¨ Celo ä¸Šéƒ¨ç½²æ™ºèƒ½åˆçº¦ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥åœ¨ Celo ä¸Šä¸ºåŠ å¯†ç»æµæ„å»ºæ–°çš„ç”¨ä¾‹ã€‚éšæ„å­¦ä¹ æ›´å¤šçš„å¯é æ€§ï¼Œæˆ–è€…ç»§ç»­å­¦ä¹  [Figment Learn](https://learn.figment.io/tutorials/) ä¸Šçš„æ•™ç¨‹ã€‚

# å¸¸è§é”™è¯¯

å¦‚æœä½ åœ¨ä»»ä½•æ—¶å€™é‡åˆ°é”™è¯¯ï¼Œè¯·éšæ—¶è¯¢é—® Figment Learn discord æœåŠ¡å™¨ä¸Šçš„ Celo é¢‘é“ã€‚æ— è®ºå¦‚ä½•ï¼Œè¿™é‡Œæœ‰ä¸€äº›ä½ å¯èƒ½ä¼šé‡åˆ°çš„å¸¸è§é”™è¯¯ã€‚

* * *

å¦‚æœå‡ºç°ä»¥ä¸‹é”™è¯¯:

`Error: Invalid JSON RPC response: {"message":"no Route matched with those values"}`

[![json rpc error](../Images/b349ebb275500d67a8482efa7f79c7b1.png)T2ã€‘](https://camo.githubusercontent.com/b10c13fb11358a60891ccd1e3191e40ffe54d19ffef9b3f0b127e3e567eed1b6/68747470733a2f2f692e696d6775722e636f6d2f42384c657272552e706e67)

é‚£ä¹ˆä½ çš„**é‡Œçš„ **REST_URL** å°±æœ‰é—®é¢˜äº†ã€‚env** æ–‡ä»¶ã€‚

ç¡®ä¿ URL æœ«å°¾æœ‰ä¸€ä¸ªç»“å°¾ **/** ï¼å®ƒåº”è¯¥æ˜¯è¿™æ ·çš„:

`REST_URL = https://celo-alfajores--rpc.datahub.figment.io/apikey/YOUR-API-KEY/`

* * *

å¦‚æœæ‚¨çš„åˆåŒæ²¡æœ‰éƒ¨ç½²åˆ°æµ‹è¯•ç½‘ç»œï¼Œæ‚¨çš„è¾“å‡ºå¯èƒ½å¦‚ä¸‹æ‰€ç¤º:

[![didn't deploy](../Images/c9baac31f82940118f2568a90c0363cf.png)T2ã€‘](https://camo.githubusercontent.com/a59c20e99081c85f182da44f68a167aec86a58da7c690367b4dbe35f57673943/68747470733a2f2f692e696d6775722e636f6d2f703637645a444d2e706e67)

åˆåŒç¼–è¯‘çš„åœ°æ–¹ï¼Œä½†æ˜¯å®ƒæ²¡æœ‰ç»™ä½ å®ƒè¢«éƒ¨ç½²åˆ°å“ªé‡Œçš„åœ°å€ã€‚

è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¯·ç¡®ä¿æ‚¨çš„å¸æˆ·ä¸­å·²ç»åŠ è½½äº† [testnet èµ„é‡‘](https://celo.org/developers/faucet)ã€‚

å¦‚æœä½ æƒ³å†æ¬¡æ£€æŸ¥ä½ çš„è´¦æˆ·æ˜¯å¦æ”¶åˆ°èµ„é‡‘ï¼Œè¯·è¿›å…¥ [Alfajores å—æµè§ˆå™¨](https://alfajores-blockscout.celo-testnet.org/)å¹¶ç²˜è´´ä½ çš„è´¦æˆ·åœ°å€ã€‚

ç¡®ä¿ä½ çš„è´¦æˆ·ä¸æ˜¯åƒè¿™ä¸ªä¸€æ ·ç©ºçš„ï¼

[![empty account](../Images/05eb6ff72ad9f2ef527d14b69a52d2ba.png)T2ã€‘](https://camo.githubusercontent.com/60a2da1b381d2d9f9c21ade38e54f3793ead7bf2162d4eb7ccb8297733494cbc/68747470733a2f2f692e696d6775722e636f6d2f795055594353442e706e67)